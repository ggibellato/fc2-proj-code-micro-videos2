{"version":3,"sources":["components/Page.tsx","pages/Dashboard.tsx","theme.ts","components/Badge.tsx","components/loading/LoadingContext.tsx","components/Table/DebouncedTableSearch.js","components/Table/index.tsx","components/Table/FilterResetButton.tsx","store/filter/index.ts","hooks/useFilter.ts","util/vendor/yup/yup.ts","util/date/index.ts","util/http/index.ts","util/http/http-resources.ts","util/http/category-http.ts","util/models.ts","pages/category/Table.tsx","pages/category/PageList.tsx","util/yup/index.ts","components/SubmitActions.tsx","components/DefaultForm.tsx","pages/category/Form.tsx","pages/category/PageForm.tsx","util/http/genre-http.ts","pages/genre/Table.tsx","pages/genre/PageList.tsx","pages/genre/Form.tsx","pages/genre/PageForm.tsx","util/http/castmember-http.ts","pages/cast-member/Table.tsx","pages/cast-member/PageList.tsx","pages/cast-member/Form.tsx","pages/cast-member/PageForm.tsx","components/DeleteDialog.tsx","util/http/video-http.ts","hooks/useDeleteCollection.ts","pages/video/Table.tsx","pages/video/PageList.tsx","components/Rating.tsx","pages/video/Form/RatingField.tsx","components/InputFile.tsx","pages/video/Form/UploadField.tsx","components/AsyncAutocomplete.tsx","components/GridSelected.tsx","components/GridSelectedItem.tsx","hooks/useCollectionManager.ts","hooks/useHttpHandle.ts","util/model-filters.ts","pages/video/Form/GenreField.tsx","pages/video/Form/CategoryField.tsx","pages/video/Form/CastMemberField.tsx","hooks/useSnackbarFormError.ts","store/upload/getters.ts","components/UploadProgress.tsx","store/upload/index.ts","components/SnackbarUpload/UploadAction.tsx","components/SnackbarUpload/UploadItem.tsx","components/SnackbarUpload/index.tsx","pages/video/Form/index.tsx","pages/video/PageForm.tsx","pages/uploads/UploadAction.tsx","pages/uploads/UploadItem.tsx","pages/uploads/index.tsx","routes/index.tsx","components/Breadcrumbs.tsx","components/Navbar/Menu.tsx","components/Navbar/index.tsx","static/img/logo.png","routes/AppRouter.tsx","components/SnackbarProvider.tsx","components/Spinner.tsx","components/loading/LoadingProvider.tsx","App.tsx","reportWebVitals.ts","store/upload/sagas.ts","store/root-saga.ts","store/index.ts","index.tsx"],"names":["useStyles","makeStyles","title","color","Page","props","classes","Container","Typography","className","component","variant","Box","paddingTop","children","Dashboard","palette","primary","main","contrastText","secondary","dark","background","default","success","green","error","red","theme","createTheme","overrides","MUIDataTable","paper","boxShadow","MUIDataTableToolbar","root","minHeight","backgroundColor","icon","iconActive","MUIDataTableHeadCell","fixedHeader","paddingBottom","sortActive","sortAction","alignItems","sortLabelRoot","MUIDataTableSelectCell","headerCell","MUIDataTableBodyCell","MUIDataTableToolbarSelect","iconButton","MUIDataTableBodyRow","MUIDataTablePagination","MUIDataTableFilterList","marginBottom","localTheme","BadgeYes","Chip","label","BadgeNo","LoadingContext","createContext","display","flex","searchIcon","text","marginTop","marginRight","searchText","clearIcon","name","DebouncedTableSearch","options","onSearch","onHide","debouncedTime","useState","setText","useEffect","undefined","value","debounceOnSearch","useCallback","debounce","Grow","appear","in","timeout","TextField","autoFocus","InputProps","textLabels","toolbar","search","inputProps","onKeyDown","event","key","onChange","target","fullWidth","placeholder","searchPlaceholder","searchProps","IconButton","onClick","Table","React","ref","debouncedSearchTime","columns","cloneDeep","useTheme","isSmOrDown","useMediaQuery","breakpoints","down","defaultOptions","print","download","body","noMatch","toolTip","pagination","next","previous","rowsPerPage","displayRows","downloadCsv","viewColumns","filterTable","filter","all","reset","titleAria","selectedRows","delete","deleteAria","customSearchRender","handleSearch","hideSearch","newProps","merge","forEach","column","width","setColumnsWith","map","omit","loading","applyLoading","responsive","originalProps","makeActionStyles","copyTheme","selector","FilterResetButton","Tooltip","handleClick","createActions","setSearch","setPage","setPerPage","setOrder","setReset","updateExtraFilter","Types","Creators","INITIAL_STATE","page","per_page","order","sort","dir","reducer","createReducer","SET_SEARCH","state","action","payload","SET_PAGE","SET_PER_PAGE","SET_ORDER","SET_RESET","update","extraFilter","UPDATE_EXTRA_FILTER","useFilter","history","useHistory","location","useLocation","locationSearch","locationPathname","pathname","locationState","rowsPerPageOptions","schema","useMemo","yup","shape","transform","isNaN","parseInt","includes","nullable","toLowerCase","createValidationSchema","stateFromURL","queryParams","URLSearchParams","substr","cast","get","getStateFromURL","cleanSearchText","cleanText","formatSearchParams","useReducer","filterState","dispatch","filterManager","FilterManager","useDebounce","debounceTime","debounceFilterState","totalRecords","setTotalRecords","replace","newLocation","pathName","oldState","nextState","isEqual","push","applyOderInColumns","setLocale","mixed","required","notType","string","max","number","min","array","tableRef","this","current","changeRowsPerPage","changePage","perPage","changedColumn","direction","resetTablePagination","data","sortOrder","formatFromISO","dateFormat","format","parseISO","httpVideo","axios","create","baseURL","process","instances","HttpResource","http","resource","cancelList","cancel","CancelToken","source","config","cancelToken","token","params","id","sendData","makeSendData","post","containsFile","getFormData","usePost","put","patch","isCancel","serialize","booleansAsIntegers","Object","values","el","File","length","categoryHttp","CastMemberTypeMap","1","2","IsActiveMap","0","VideoFileFieldsMap","isActiveNames","columnsDefinition","filterOptions","names","customBodyRender","tableMeta","updateValue","Link","to","rowData","enqueueSnackbar","useSnackbar","subscribed","useRef","setData","useContext","is_active","debouncedState","indexColumnIsActive","findIndex","c","columnIsActive","isActiveFilterValue","filterList","getData","a","list","invert","meta","total","console","isCancelledRequest","serverSide","count","onFilterChange","columnIndex","changeExtraFilter","customToolbar","resetFilter","onSearchChange","changeSearch","onChangePage","onChangeRowsPerPage","onColumnSortChange","changeColumnSort","PageList","Fab","size","useYupValidationResolver","validationSchema","validate","abortEarly","errors","inner","reduce","allErrors","currentError","path","type","message","submit","margin","spacing","SubmitActions","buttonProps","disabled","disabledButtons","Button","handleSave","gridItem","padding","DefaultForm","GridContainerProps","GridItemProps","other","Grid","container","item","Form","resolver","useForm","defaultValues","register","handleSubmit","getValues","setValue","watch","trigger","snackbar","useParams","category","setCategory","onSubmit","formData","setTimeout","isSubscribed","xs","md","inputRef","InputLabelProps","shrink","helperText","multiline","rows","FormControlLabel","labelPlacement","control","Checkbox","checked","then","isValid","PageForm","genreHttp","filterType","join","setCategories","categories","split","indexColumnCategories","columnCategories","categoriesFilterValue","categories_id","genre","setGenre","promises","Promise","categoriesResponse","genreResponse","select","e","SelectProps","multiple","MenuItem","castMemberHttp","castMemberNames","indexColumnType","columnType","typeFilterValue","castMember","setCastMember","FormControl","FormLabel","RadioGroup","Radio","FormHelperText","DeleteDialog","open","handleClose","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","videoHttp","useDeleteCollection","openDeleteDialog","setOpenDeleteDialog","rowsToDelete","setRowsToDelete","confirmed","ids","index","deleteCollection","response","catch","onRowsDelete","rowsDeleted","newTableData","height","fontSize","borderRadius","justifyContent","backgroundColors","Rating","style","rating","ratings","RatingField","FormControlProps","row","InputFile","forwardRef","fileRef","fileName","setFileName","useImperativeHandle","openWindow","click","clear","textFieldProps","TextFieldProps","readOnly","endAdornment","InputAdornment","position","ButtonFile","inputFileProps","InputFileProps","files","Array","from","file","hidden","UploadField","accept","endIcon","AsyncAutocomplete","AutocompleteProps","fetchOptions","freeSolo","onOpen","onInputChange","setOpen","setSearchText","debouncedSearchText","setLoading","setOptions","autocompleteProps","loadingText","noOptionsText","getOptionLabel","option","renderInput","CircularProgress","Autocomplete","createStyles","GridSelected","wrap","GridSelectedItem","onDelete","useCollectionManager","collection","setCollection","addItem","find","i","unshift","removeItem","splice","useHttpHandle","request","log","getGenresFromCategory","genres","cat","GenreField","setGenres","autoCompleteHttp","removeCategory","autoCompleteRef","clearOnEscape","getOptionSelected","noWrap","genresSubtitle","grey","CategoryField","generesFromCategory","CastMemberField","cast_members","setCastMembers","cast_member","useSnackbarFormError","submitCount","hasError","keys","isFinished","obj","progress","isUploadType","some","progressContainer","left","progressBackground","UploadProgress","uploadOrFile","Fade","enter","exit","addUpload","removeUpload","updateProgress","setUploadError","uploads","ADD_UPLOAD","findIndexUpload","video","$splice","fileField","filename","REMOVE_UPLOAD","upload","UPDATE_PROGRESS","videoId","findIndexUploadAndFile","indexUpload","indexFile","$apply","$set","calculateGlobalProgress","SET_UPLOAD_ERROR","findIndexFile","countFiles","sum","successIcon","errorIcon","UploadAction","hover","useDispatch","show","setShow","debouncedShow","ListItemSecondaryAction","edge","listItem","moveIcon","minWidth","listItemText","marginLeft","UploadItem","itemHover","setItemHover","disableFocusListener","disableTouchListener","placement","ListItem","button","onMouseOver","onMouseLeave","ListItemIcon","ListItemText","Divider","card","cardActionRoot","fontWeight","icons","expand","transition","transitions","duration","shortest","expandOpen","SnackbarUpload","closeSnackbar","expanded","setExpanded","useSelector","totalInProgress","countInProgress","Card","CardActions","classnames","Collapse","List","cardUpload","boardRadius","cardOpened","cardContentOpened","description","year_launched","test","every","g","parent","fileFields","opened","formState","setVideo","isGreaterMd","up","castMemberRef","genreRef","categoryRef","uploadsRef","zipObject","createRef","field","resetForm","uploadFiles","persist","anchorOrigin","vertical","horizontal","content","shouldValidate","CardContent","divider","activeActions","orientation","gridTitle","justify","panelSummary","expandedIcon","routes","exact","CategoryList","PageFormCategory","GenreList","PageFormGenre","CastMemberList","PageFormCastMember","VideoList","PageFormVideo","elevation","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","dense","Fragment","breadcrumbNameMap","route","linkRouter","LinkRouter","RouterLink","Breadcrumbs","pathNames","x","aria-label","last","slice","RouteParser","match","makeBreadcrumb","listRoutes","menuRoutes","Menu","anchorEl","setAnchorEl","Boolean","arial-label","arial-controls","aria-haspopup","currentTarget","transformOrigin","getContentAnchorEl","routeName","flexGrow","textAlign","logo","Navbar","AppBar","Toolbar","src","alt","AppRouter","pointerEvents","variantSuccess","variantError","variantInfo","SnackbarProvider","snackbarProviderRef","defaultProps","autoHideDuration","maxSnack","preventDuplicate","makeLocalTheme","Spinner","LinearProgress","zIndex","LoadingProvider","countRequest","setCountRequest","decrementCountRequest","prevCountRequest","requestIds","onFulfilled","onRejected","interceptors","use","addGlobalRequestInterceptor","headers","hasOwnProperty","responseIds","addGlobalResponseInterceptor","reject","eject","removeGlobalResponseInterceptor","Provider","App","CssBaseline","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","uploadWatcherSaga","uploadFile","actionChannel","newFilesChannel","take","fileInfo","call","f","sendUpload","channel","eventChannel","emitter","partialUpdate","_method","onUploadProgress","progressEvent","lengthComputable","loaded","finally","END","rootSaga","sagaMiddleware","createSagaMiddleware","store","createStore","combineReducers","applyMiddleware","run","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.701dd3c3.chunk.js","sourcesContent":["import { Box, Container, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\n\n\nconst useStyles = makeStyles({\n    title: {\n        color: '#999999'\n    }\n});\n\ntype PageProps = {\n    title: string    \n};\n\nexport const Page: React.FC<PageProps> = (props)  => {\n    const classes = useStyles();\n    return (\n        <Container>\n            <Typography className={classes.title} component=\"h1\" variant=\"h5\">\n                {props.title}\n            </Typography>\n            <Box paddingTop={1}>\n                {props.children}\n            </Box>\n        </Container>\n    );\n}\n","import * as React from 'react';\nimport { Page } from '../components/Page';\n\ntype DashboardProps = {\n    \n};\n\nconst Dashboard = (props: DashboardProps) => {\n    return (\n        <Page title=\"Dashboard\">\n\n        </Page>\n    );\n};\n\nexport default Dashboard;","import { createTheme } from '@material-ui/core/styles';\nimport { PaletteOptions, SimplePaletteColorOptions } from \"@material-ui/core/styles/createPalette\";\nimport { green, red  } from \"@material-ui/core/colors\"\n\nconst palette: PaletteOptions = {\n    primary : {\n        main: '#79aec8',\n        contrastText: '#fff'\n    },\n    secondary :  {\n        main: '#4db5ab',\n        contrastText: '#fff',\n        dark: '#055a52'\n    },\n    background :{\n        default: '#fafafa'\n    },\n    success: {\n        main: green[500],\n        contrastText: '#fff'\n    },\n    error: {\n        main: red[500],\n        contrastText: '#fff'\n    },\n};\n\nconst theme =  createTheme( {\n    palette,\n    overrides: {\n        MUIDataTable :{\n            paper: {\n                boxShadow: \"none\"\n            }\n        },\n        MUIDataTableToolbar: {\n            root: {\n                minHeight: '58px',\n                backgroundColor: palette!.background!.default\n            },\n            icon: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n                '&:hover, &active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).dark,\n                }\n            },\n            iconActive: {\n                color: (palette!.secondary as SimplePaletteColorOptions).dark,\n                '&:hover, &active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).dark,\n                }\n            }\n        },\n        MUIDataTableHeadCell: {\n            fixedHeader :{\n                paddingTop: 8,\n                paddingBottom: 8,\n                backgroundColor: (palette!.primary as SimplePaletteColorOptions).main,\n                color: '#ffffff',\n                '&[aria-sort]': {\n                    backgroundColor: '#459ac4'\n                }\n            },\n            sortActive: {\n                color: '#ffffff',\n            },\n            sortAction: {\n                alignItems: 'center'\n            },\n            sortLabelRoot: {\n                '& svg': {\n                    color: '#fff !important'\n                }\n            }\n        },\n        MUIDataTableSelectCell: {\n            headerCell: {\n                backgroundColor: (palette!.primary as SimplePaletteColorOptions).main,\n                '& span': {\n                    color: '#fff !important'\n                }\n            }\n        },\n        MUIDataTableBodyCell: {\n            root: {\n                color: (palette!.secondary as SimplePaletteColorOptions).main,\n                '&:hover, &:active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).main\n                }\n            }\n        },\n        MUIDataTableToolbarSelect: {\n            title: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n            },\n            iconButton: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n            }\n        },\n        MUIDataTableBodyRow: {\n            root: {\n                '&:nth-child(odd)': {\n                    backgroundColor: palette!.background!.default\n                }\n            }\n        },\n        MUIDataTablePagination: {\n            root: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,            \n            }\n        },\n        MUIDataTableFilterList: {\n            root: {\n                marginBottom: '16px'\n            }\n        }\n    }\n});\n\nexport default theme;","import { Chip, MuiThemeProvider } from '@material-ui/core';\nimport { createTheme } from '@material-ui/core/styles';\nimport theme from \"../theme\";\n\nconst localTheme = createTheme({\n    palette: {\n        primary: theme.palette.success,\n        secondary: theme.palette.error,\n    }\n})\n\nexport const BadgeYes = () => {\n    return (\n        <MuiThemeProvider theme = {localTheme}>\n            <Chip label=\"Sim\" color=\"primary\" />    \n        </MuiThemeProvider>\n    );\n};\n\nexport const BadgeNo = () => {\n    return (\n        <MuiThemeProvider theme = {localTheme}>\n            <Chip label=\"Nao\" color=\"secondary\" />\n        </MuiThemeProvider>\n    );\n};","import { createContext } from \"react\";\n\nconst LoadingContext = createContext(false);\n\nexport default LoadingContext;","import { useCallback, useEffect, useState } from 'react';\nimport Grow from '@material-ui/core/Grow';\nimport TextField from '@material-ui/core/TextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport IconButton from '@material-ui/core/IconButton';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { debounce } from 'lodash';\n\nconst useStyles = makeStyles(\n  theme => ({\n    main: {\n      display: 'flex',\n      flex: '1 0 auto',\n    },\n    searchIcon: {\n      color: theme.palette.text.secondary,\n      marginTop: '10px',\n      marginRight: '8px',\n    },\n    searchText: {\n      flex: '0.8 0',\n    },\n    clearIcon: {\n      '&:hover': {\n        color: theme.palette.error.main,\n      },\n    },\n  }),\n  { name: 'MUIDataTableSearch' },\n);\n\nconst DebouncedTableSearch = ({ options, searchText, onSearch, onHide, debouncedTime }) => {\n  const classes = useStyles();\n\n  const [text, setText] = useState(searchText);\n  \n  useEffect(() => {\n    if(searchText && searchText.value !== undefined && text !== searchText.value) {\n      setText(searchText.value);\n    }\n  }, [searchText, text]);\n\n  // if changed to \n  // const debounceOnSearch = useCallback(() => {\n  //  debounce(text => onSearch(text), debouncedTime);\n  //},[onSearch, debouncedTime]);\n  // it will not call when text change\n  const debounceOnSearch = useCallback(debounce(text => onSearch(text), debouncedTime),[onSearch, debouncedTime]);\n\n  useEffect(() => {\n      debounceOnSearch(text);\n  }, [debounceOnSearch, text]);\n\n  const handleTextChange = event => {\n    const value = event.target.value;\n    setText(value);\n  };\n\n  const onKeyDown = event => {\n    if (event.key === 'Escape') {\n      onHide();\n    }\n  };\n\n  return (\n    <Grow appear in={true} timeout={300}>\n      <div className={classes.main}>\n        <SearchIcon className={classes.searchIcon} />\n        <TextField\n          className={classes.searchText}\n          autoFocus={true}\n          InputProps={{\n            'data-test-id': options.textLabels.toolbar.search,\n          }}\n          inputProps={{\n            'aria-label': options.textLabels.toolbar.search,\n          }}\n          value={text || ''}\n          onKeyDown={onKeyDown}\n          onChange={handleTextChange}\n          fullWidth={true}\n          placeholder={options.searchPlaceholder}\n          {...(options.searchProps ? options.searchProps : {})}\n        />\n        <IconButton className={classes.clearIcon} onClick={onHide}>\n          <ClearIcon />\n        </IconButton>\n      </div>\n    </Grow>\n  );\n};\n\nexport default DebouncedTableSearch;","import MUIDataTable, { MUIDataTableColumn, MUIDataTableOptions, MUIDataTableProps } from 'mui-datatables';\nimport * as React from 'react';\nimport {merge, omit, cloneDeep} from 'lodash';\nimport { MuiThemeProvider, Theme, useTheme } from '@material-ui/core';\nimport { useMediaQuery } from '@material-ui/core';\nimport DebouncedTableSearch from './DebouncedTableSearch';\n\nconst makeDefaultOptions = (debouncedSearchTime?:number): MUIDataTableOptions => ({\n    print: false,\n    download: false,\n    textLabels: {\n        body: {\n            noMatch: \"Nenhum registro encontrado\",\n            toolTip: \"Classificar\",\n        },\n        pagination: {\n            next: \"Próxima página\",\n            previous: \"Página anterior\",\n            rowsPerPage: \"Por página:\",\n            displayRows: \"de\",\n        },\n        toolbar: {\n            search: \"Busca\",\n            downloadCsv: \"Download CSV\",\n            print: \"Imprimir\",\n            viewColumns: \"Ver Colunas\",\n            filterTable: \"Filtrar Tabelas\",\n        },\n        filter: {\n            all: \"Todos\",\n            title: \"FILTROS\",\n            reset: \"LIMPAR\",\n        },\n        viewColumns: {\n            title: \"Ver Colunas\",\n            titleAria: \"Ver/Esconder Colunas da Tabela\",\n        },\n        selectedRows: {\n            text: \"registros(s) selecionados\",\n            delete: \"Excluir\",\n            deleteAria: \"Excluir registros selecionados\",\n        },\n    },\n    customSearchRender: (searchText:any,\n            handleSearch: any,\n            hideSearch: any,\n            options: any\n        ) => {\n            return (\n                <DebouncedTableSearch \n                    searchText={searchText}\n                    onSearch={handleSearch}\n                    onHide={hideSearch}\n                    options={options}\n                    debouncedTime={debouncedSearchTime}\n                />\n            )                \n\n        }\n});\n\nexport interface TableColumn extends MUIDataTableColumn {\n    width?: string;\n}\n\nexport interface TableProps extends MUIDataTableProps {\n    columns: TableColumn[];\n    resetSearch?: boolean;\n    loading?: boolean;\n    debouncedSearchTime?: number;\n};\n\nexport interface MuiDataTableRefComponent {\n    changePage: (page: number) => void;\n    changeRowsPerPage: (rowsPerPage: number) => void;\n}\n\nconst Table = React.forwardRef<MuiDataTableRefComponent, TableProps>((props, ref) => {\n    function extractMuiDataTableColumns(columns: TableColumn[]): MUIDataTableColumn[] {\n        setColumnsWith(columns);\n        return columns.map(column => omit(column, 'width'));\n    }\n\n    function setColumnsWith(columns:TableColumn[]) {\n        columns.forEach((column, key) => {\n            if(column.width) {\n                const overrides = theme.overrides as any;\n                overrides.MUIDataTableHeadCell.fixedHeader[`&:nth-child(${key + 2})`] = {\n                      width: column.width\n                }\n            }\n        });\n    }\n\n    function applyLoading() {\n        const textLabels = (newProps.options as any).textLabels;\n        textLabels.body.noMatch = newProps.loading === true \n            ? 'Carregando...'\n            : textLabels.body.noMatch;\n    }\n\n    function applyResponsive() {\n        newProps.options.responsive = isSmOrDown ? 'standard' : 'vertical';\n    }\n\n    function getOriginalMuiDataTableProps() {\n        return { \n            ...omit(newProps, 'loading'),\n            ref\n        }\n    }\n\n    const theme = cloneDeep<Theme>(useTheme());\n\n    const isSmOrDown = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const defaultOptions = makeDefaultOptions(props.debouncedSearchTime);\n\n    const newProps = merge(\n        {options: cloneDeep(defaultOptions)}, \n        props,\n        {columns: extractMuiDataTableColumns(props.columns)}\n    );\n\n    applyLoading();\n    applyResponsive();\n\n    const originalProps = getOriginalMuiDataTableProps();\n\n    return (\n        <MuiThemeProvider theme={theme}>\n            <MUIDataTable {...originalProps}/>\n        </MuiThemeProvider>\n    );\n});\n\nexport default Table;\n\nexport function makeActionStyles(column: number) {\n    return (theme: Theme) => {\n        const copyTheme = cloneDeep(theme);\n        const selector = `&[data-testid^=\"MuiDataTableBodyCell-${column}\"]`;\n        (copyTheme.overrides as any).MUIDataTableBodyCell.root[selector] = {\n            paddingTop: '0px',\n            paddingBottom: '0px'\n        }\n        return copyTheme;\n    }\n}\n","import { IconButton, makeStyles, Tooltip, Theme } from '@material-ui/core'\nimport ClearAllIcon from '@material-ui/icons/ClearAll'\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    iconButton: (theme as any).overrides.MUIDataTableToolbar.icon\n}));\n\ninterface FilterResetButtonProps {\n    handleClick: () => void\n}\n\nexport const FilterResetButton: React.FC<FilterResetButtonProps> = (props) => {\n    const classes = useStyles();\n    return (\n        <Tooltip title={'Limpar busca'}>\n            <IconButton className={classes.iconButton} onClick={props.handleClick}>\n                <ClearAllIcon />\n            </IconButton>\n        </Tooltip>\n    )\n}\n","import * as Typings from \"./types\";\nimport { createActions, createReducer } from 'reduxsauce';\n\nexport const { Types, Creators } = createActions<{\n    SET_SEARCH: string,\n    SET_PAGE: string,\n    SET_PER_PAGE: string,\n    SET_ORDER: string,\n    SET_RESET: string,\n    UPDATE_EXTRA_FILTER: string\n}, {\n    setSearch(payload: Typings.SetSearchAction['payload']): Typings.SetSearchAction,\n    setPage(payload: Typings.SetPageAction['payload']): Typings.SetPageAction,\n    setPerPage(payload: Typings.SetPerPageAction['payload']): Typings.SetPerPageAction,\n    setOrder(payload: Typings.SetOrderAction['payload']): Typings.SetOrderAction,\n    setReset(payload: Typings.SetResetAction['payload']): Typings.SetResetAction,\n    updateExtraFilter(payload: Typings.UpdateExtraFilterAction['payload']): Typings.UpdateExtraFilterAction\n}>\n( {\n    setSearch: ['payload'],\n    setPage: ['payload'],\n    setPerPage: ['payload'],\n    setOrder: ['payload'],\n    setReset: ['payload'],\n    updateExtraFilter: ['payload']\n});\n\nexport const INITIAL_STATE: Typings.State = { \n    search: '',\n    pagination: {\n        page: 1,\n        per_page: 10\n    },\n    order: {\n        sort: null,\n        dir: null\n    },\n};\n\nconst reducer = createReducer<Typings.State, Typings.Actions>(INITIAL_STATE, {\n    [Types.SET_SEARCH]: setSearch,\n    [Types.SET_PAGE]: setPage,\n    [Types.SET_PER_PAGE]: setPerPage,\n    [Types.SET_ORDER]: setOrder,\n    [Types.SET_RESET]: setReset,\n    [Types.UPDATE_EXTRA_FILTER]: updateExtraFilter\n});\n\nexport default reducer;\n\nfunction setSearch(state = INITIAL_STATE, action: Typings.SetSearchAction) : Typings.State {\n    return {\n        ...state,\n        search: action.payload.search ?? '',\n        pagination: {\n            ...state.pagination,\n            page:1\n        }\n    };\n}\n\nfunction setPage(state = INITIAL_STATE, action: Typings.SetPageAction) : Typings.State {\n    return {\n        ...state,\n        pagination: {\n            ...state.pagination,\n            page: action.payload.page\n        }\n    };\n}\n\nfunction setPerPage(state = INITIAL_STATE, action: Typings.SetPerPageAction) : Typings.State {\n    return {\n        ...state,\n        pagination: {\n            ...state.pagination,\n            per_page: action.payload.per_page\n        }\n    };\n}\n\nfunction setOrder(state = INITIAL_STATE, action: Typings.SetOrderAction) : Typings.State {\n    return {\n        ...state,\n        order: {\n            sort: action.payload.sort,\n            dir: action.payload.dir\n        }\n    };\n}\n\nfunction setReset(state = INITIAL_STATE, action: Typings.SetResetAction) : Typings.State {\n    return {...state, search: {value: null, update: true}, order: {sort: null, dir: null}, extraFilter: undefined};\n}\n\nfunction updateExtraFilter(state= INITIAL_STATE, action: Typings.UpdateExtraFilterAction) {\n    return {\n        ...state,\n        extraFilter: {\n            ...state.extraFilter,\n            ...action.payload\n        }\n    }\n}","import {isEqual} from 'lodash';\nimport { MUIDataTableColumn } from \"mui-datatables\";\nimport { Dispatch, Reducer, useCallback, useReducer, useEffect, useMemo, useState } from \"react\";\nimport {useHistory, useLocation} from 'react-router';\nimport { useDebounce } from 'use-debounce';\n\nimport { MuiDataTableRefComponent } from \"../components/Table\";\nimport reducer, { Creators } from \"../store/filter\";\nimport { Actions as FilterActions, State as FilterState } from \"../store/filter/types\";\nimport * as yup from '../util/vendor/yup/yup';\nimport { ObjectSchema } from '../util/vendor/yup/yup';\n\ninterface FilterManagerOptions {\n    schema: ObjectSchema<any, any, any, any>;\n    columns: MUIDataTableColumn[];\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n    rowsPerPage: number;\n    dispatch: Dispatch<FilterActions>;\n    state: FilterState;\n}\n\ninterface ExtraFilter {\n    getStateFromURL: (queryParams: URLSearchParams) => any;\n    formatSearchParams: (debouncedState: FilterState) => any;\n    createValidationSchema: () => any;\n}\n\ninterface UseFilterOptions {\n    columns: MUIDataTableColumn[];\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n    rowsPerPage: number;\n    rowsPerPageOptions: number[];\n    debounceTime: number;\n    extraFilter?: ExtraFilter;\n}\n\nexport default function useFilter(options: UseFilterOptions) {\n    const history = useHistory();\n    const location = useLocation();\n    const {search: locationSearch, pathname: locationPathname, state: locationState} = location;\n    const {rowsPerPage, rowsPerPageOptions, extraFilter, columns} = options;\n\n    const schema = useMemo(() => {\n        return yup.object().shape( {\n            search: yup.string()\n                .transform( value => !value ? undefined : value)\n                .default(''),\n            pagination: yup.object().shape({\n                page: yup.number()\n                    .transform(value => isNaN(value) || parseInt(value) < 1 ? undefined : value)\n                    .default(1),\n                per_page: yup.number()\n                    .transform( value => \n                        isNaN(value) || !rowsPerPageOptions.includes(parseInt(value)) ? undefined : value\n                    )\n                    .default(rowsPerPage)\n            }),\n            order: yup.object().shape({\n                sort: yup.string()\n                    .nullable()\n                    .transform(value => {\n                        const columnsName = columns\n                            .filter(column => !column.options || column.options.sort !== false)\n                            .map(column => column.name);\n                        return columnsName.includes(value) ? value : undefined;\n                    })\n                    .default(null),\n                dir: yup.string()\n                    .nullable()\n                    .transform(value => !value || !['asc', 'desc'].includes(value.toLowerCase()) ? undefined : value)\n                    .default(null),\n            }),\n            ...(\n                extraFilter && {\n                    extraFilter: extraFilter.createValidationSchema()\n                }\n            )\n        });\n    }, [rowsPerPageOptions, rowsPerPage, columns, extraFilter]);\n\n    //react-router history mutable | location immutable\n    const stateFromURL = useMemo(() => {\n        const queryParams = new URLSearchParams(locationSearch.substr(1));\n        return schema.cast({\n            search: queryParams.get('search'),\n            pagination: {\n                page: queryParams.get('page'),\n                per_page: queryParams.get('per_page')\n            },\n            order: {\n                sort: queryParams.get('sort'),\n                dir: queryParams.get('dir')\n            },\n            ...(\n                extraFilter && {\n                    extraFilter: extraFilter.getStateFromURL(queryParams)\n                }\n            )\n        });\n    },[locationSearch, schema, extraFilter]);\n\n    const cleanSearchText = useCallback((text: any) => {\n        let cleanText = text;\n        if(cleanText && cleanText.value !== undefined){\n            cleanText = cleanText.value;\n        }\n        return cleanText;\n    }, []);\n\n    const formatSearchParams = useCallback((state, extraFilter) => {\n        const search = cleanSearchText(state.search);\n        return  {\n            ...(search && search !== '' && {search: search}),\n            ...(state.pagination.page !== 1 && {page: state.pagination.page}),\n            ...(state.pagination.per_page !== 15 && {per_page: state.pagination.per_page}),\n            ...(\n                state.order.sort && {\n                    sort: state.order.sort,\n                    dir: state.order.dir\n                }\n            ),\n            ...(\n                extraFilter && extraFilter.formatSearchParams(state)\n            )\n        };\n    }, [cleanSearchText]);\n\n    const INITIAL_STATE = stateFromURL;\n    const [filterState, dispatch] = useReducer<Reducer<FilterState, FilterActions>>(reducer, INITIAL_STATE);\n    const filterManager = new FilterManager({...options, state: filterState, dispatch, schema});\n    const [debounceFilterState] = useDebounce(filterState, options.debounceTime);\n    const [totalRecords, setTotalRecords] = useState<number>(0);\n\n    useEffect(() => {\n        history.replace({\n            pathname: locationPathname,\n            search: \"?\" + new URLSearchParams(formatSearchParams(stateFromURL, extraFilter)),\n            state: stateFromURL\n        });\n    }, [history, locationPathname, formatSearchParams, stateFromURL, extraFilter]);\n\n    useEffect(() => {\n        const newLocation = {\n            pathName: locationPathname,\n            search: \"?\" + new URLSearchParams(formatSearchParams(debounceFilterState, extraFilter)),\n            state: {\n                ...debounceFilterState,\n                search: cleanSearchText(debounceFilterState.search)\n            }\n        }\n        const oldState = locationState;\n        const nextState = {\n            ...debounceFilterState,\n            search: cleanSearchText(debounceFilterState.search),\n        };\n        if(isEqual(oldState, nextState)) {\n            return;\n        }\n        history.push(newLocation);\n    }, [history, locationPathname, formatSearchParams, locationState, debounceFilterState, extraFilter, cleanSearchText]);\n\n    filterManager.state = filterState;\n    filterManager.applyOderInColumns();\n\n    return {\n        columns: filterManager.columns,\n        cleanSearchText,\n        filterManager,\n        filterState,\n        debounceFilterState,\n        dispatch,\n        totalRecords,\n        setTotalRecords\n    }\n}\n\nexport class FilterManager {\n    schema: any;\n    state: FilterState;\n    dispatch: Dispatch<FilterActions>;\n    columns: MUIDataTableColumn[];\n    rowsPerPage: number;\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n\n    constructor(options: FilterManagerOptions) {\n        const {schema, columns, rowsPerPage, tableRef, dispatch, state} = options;\n        this.schema = schema;\n        this.columns = columns;\n        this.rowsPerPage = rowsPerPage;\n        this.tableRef = tableRef;\n        this.dispatch = dispatch;\n        this.state = state;\n    }\n\n    private resetTablePagination() {\n        this.tableRef.current.changeRowsPerPage(this.rowsPerPage);\n        this.tableRef.current.changePage(0);\n    }\n\n    changeSearch(value: string | null) {\n        this.dispatch(Creators.setSearch({search: value ?? ''}));\n    }\n\n    changePage(page: number) {\n        this.dispatch(Creators.setPage({page: page + 1}))\n    }\n\n    changeRowsPerPage(perPage:number) {\n        this.dispatch(Creators.setPerPage({per_page: perPage}));\n    }\n\n    changeColumnSort(changedColumn: string, direction: string) {\n        this.dispatch(Creators.setOrder({\n            sort: changedColumn, \n            dir: direction.includes('desc') ? 'desc': 'asc'\n        }));\n        this.resetTablePagination();\n    }\n\n    changeExtraFilter(data: any) {\n        this.dispatch(Creators.updateExtraFilter(data));\n    }\n\n    applyOderInColumns() {\n        this.columns = this.columns.map(column => {\n            return this.state.order.sort === column.name\n              ? {\n                  ...column,\n                  options: {\n                      ...column.options,\n                      sortOrder: this.state.order.dir as any\n                  }\n              }\n              : column;\n        });\n    }\n\n    resetFilter() {\n        const INITIAL_STATE = {\n            ...this.schema.cast({}),\n            search: { value: null, update: true },\n            order: {\n                sort: null,\n                dir: null\n            },\n            extraFilter: undefined,\n          };\n        this.dispatch(\n            Creators.setReset({\n              state: INITIAL_STATE,\n            })\n          );        \n        this.resetTablePagination();          \n    }\n}","/* eslint-disable no-template-curly-in-string */\nimport {setLocale} from 'yup';\n\nsetLocale({\n    mixed: {\n        required: '${path} é requerido',\n        notType: '${path} é inválido'\n    },\n    string: {\n        max: '${path} precisa ter no máximo ${max}'\n    },\n    number: {\n        min: '${path} precisa ser no minimo ${min}'\n    },\n    array: {\n        min: '${path} precisa ter pelo menos ${min} items'\n    }\n});\n\nexport * from 'yup';","import format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\n\nexport const formatFromISO = (value: string, dateFormat: string ) => {\n    return format(parseISO(value), dateFormat);\n}\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\n\nexport const httpVideo = axios.create({\n    baseURL: process.env.REACT_APP_MICRO_VIDEO_API_URL\n});\n\n\nconst instances = [httpVideo];\n\nexport function addGlobalRequestInterceptor(\n    onFulfilled?: (value: AxiosRequestConfig) => AxiosRequestConfig | Promise<AxiosRequestConfig>,\n    onRejected?: (error: any) => any\n){\n    const ids: number[] = [];\n    for(let i of instances){\n        const id = i.interceptors.request.use(onFulfilled, onRejected);\n        ids.push(id);\n    }\n    return ids;\n}\n\nexport function removeGlobalRequestInterceptor(ids: number[]){\n    ids.forEach((id, index) => instances[index].interceptors.request.eject(id));\n}\n\nexport function addGlobalResponseInterceptor(\n    onFulfilled?: (value: AxiosResponse) => AxiosResponse | Promise<AxiosResponse>,\n    onRejected?: (error: any) => any\n){\n    const ids: number[] = [];\n    for(let i of instances){\n        const id = i.interceptors.response.use(onFulfilled, onRejected);\n        ids.push(id);\n    }\n    return ids;\n}\n\nexport function removeGlobalResponseInterceptor(ids: number[]){\n    ids.forEach((id, index) => instances[index].interceptors.response.eject(id));\n}\n","import { AxiosInstance, AxiosRequestConfig, AxiosResponse, CancelTokenSource } from \"axios\";\nimport axios from \"axios\";\nimport {serialize } from \"object-to-formdata\";\n\nexport default class HttpResource {\n\n    private cancelList: CancelTokenSource | null = null;\n\n    constructor(protected http: AxiosInstance, protected resource: string) {\n\n    }\n\n    list<T = any>(options?: {queryParams?:any}): Promise<AxiosResponse<T>> {\n        if(this.cancelList) {\n            this.cancelList.cancel('list request cancelled');\n        }\n        this.cancelList = axios.CancelToken.source();\n\n        const config: AxiosRequestConfig = {\n            cancelToken: this.cancelList.token\n        };\n        if(options && options.queryParams) {\n            config.params = options.queryParams;\n        }\n        return this.http.get<T>(this.resource, config);\n    }\n\n    get<T = any>(id: any): Promise<AxiosResponse<T>> {\n        return this.http.get<T>(`${this.resource}/${id}`);\n    }\n\n    create<T = any>(data: any): Promise<AxiosResponse<T>> {\n        let sendData = this.makeSendData(data);\n        return this.http.post<T>(this.resource, sendData);\n    }   \n    \n    update<T = any>(id: any, data: any, options?: {http?:{ usePost: boolean}, config?: AxiosRequestConfig}): Promise<AxiosResponse<T>> {\n        let sendData = data;\n        if(this.containsFile(data)){\n            sendData = this.getFormData(data);\n        }\n        const {http, config} = (options || {}) as any;\n        return !options || !http || !http.usePost\n        ? this.http.put<T>(`${this.resource}/${id}`, sendData, config)\n        : this.http.post<T>(`${this.resource}/${id}`, sendData, config);\n    }\n\n    partialUpdate<T = any>(id: any, data: any, options?: {http?:{ usePost: boolean}, config?: AxiosRequestConfig}): Promise<AxiosResponse<T>> {\n        let sendData = data;\n        if(this.containsFile(data)){\n            sendData = this.getFormData(data);\n        }\n        const {http, config} = (options || {}) as any;\n        return !options || !http || !http.usePost\n        ? this.http.patch<T>(`${this.resource}/${id}`, sendData, config)\n        : this.http.post<T>(`${this.resource}/${id}`, sendData, config);\n    }\n\n    delete<T = any>(id: any): Promise<AxiosResponse<T>> {\n        return this.http.delete<T>(`${this.resource}/${id}`);\n    }\n\n    deleteCollection<T = any>(queryParams:any): Promise<AxiosResponse<T>> {\n        const config:AxiosRequestConfig = {};\n        if(queryParams) {\n            config['params'] = queryParams;\n        }\n        return this.http.delete<T>(`${this.resource}`, config);\n    }\n\n    isCancelledRequest(error: any) {\n        return axios.isCancel(error);\n    }\n\n    private makeSendData(data: any) {\n        return this.containsFile(data) ? this.getFormData(data) : data;\n    }\n\n    private getFormData(data: any) {\n        // const formData = new FormData();\n        // Object\n        //     .keys(data)\n        //     .forEach(key => {\n        //         let value = data[key];\n        //         if (typeof value === \"undefined\") {\n        //             return;\n        //         }\n        //         if (typeof value === \"boolean\") {\n        //             value = value ? 1 : 0;\n        //         }\n        //         if(value instanceof Array){\n        //             value.forEach(v => formData.append(`${key}[]`, v))\n        //             return;\n        //         }\n        //         formData.append(key, value)\n        //     });\n        return serialize(data, {booleansAsIntegers: true});\n    }\n\n    private containsFile(data:any) {\n        return Object\n            .values(data)\n            .filter(el => el instanceof File).length !== 0\n    }\n}","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resources\";\n\nconst categoryHttp = new HttpResource(httpVideo, \"categories\");\n\nexport default categoryHttp;","export interface ListResponse<T> {\n    data: T[];\n    links: {\n        first: string;\n        last: string;\n        prev: string | null;\n        next: string | null;\n    }\n    meta: {\n        current_page: number;\n        from: number;\n        last_page: number;\n        path: string;\n        per_page: number;\n        to: number;\n        total: number;\n    }\n}\n\ninterface Timestampable {\n    readonly created_at: string;\n    readonly deleted_at: string | null;\n    readonly updated_at: string;\n}\n\nexport interface Category extends Timestampable {\n    readonly id: string;\n    name: string;\n    description: string;\n    is_active: boolean;\n}\n\nexport interface CastMember extends Timestampable  {\n    readonly id: string;\n    name: string;\n    type: number;\n}\n\nexport const CastMemberTypeMap = {\n    1: 'Diretor',\n    2: 'Ator'\n};\n\nexport const IsActiveMap = {\n    0: 'Nao',\n    1: 'Sim'\n};\n\n\nexport interface Genre extends Timestampable {\n    readonly id: string;\n    name: string;\n    is_active: boolean;\n    categories: Category[];\n}\n\ninterface GenreVideo extends Omit<Genre, 'categories'> {\n\n}\n\nexport const VideoFileFieldsMap = {\n    'thumb_file': 'Thumbnail',\n    'banner_file': 'Banner',\n    'trailer_file': 'Trailer',\n    'video_file': 'Principal'\n}\n\nexport interface Video extends Timestampable {\n    readonly id: string;\n    title: string;\n    description: string;\n    year_launched: number;\n    opened: boolean;\n    rating: string;\n    duration: number;\n    genres: GenreVideo[];\n    categories: Category[];\n    cast_members: CastMember[];\n    thumb_file_url: string;\n    banner_file_url: string;\n    trailer_file_url: string;\n    video_file_url: string;\n}\n","import { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { invert } from \"lodash\";\nimport { useSnackbar } from 'notistack';\nimport { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { BadgeNo, BadgeYes } from '../../components/Badge';\nimport LoadingContext from '../../components/loading/LoadingContext';\nimport DefaultTable, { makeActionStyles, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport useFilter from '../../hooks/useFilter';\nimport { formatFromISO } from '../../util/date';\nimport categoryHttp from '../../util/http/category-http';\nimport { Category, ListResponse, IsActiveMap } from '../../util/models';\nimport * as yup from \"../../util/vendor/yup/yup\";\n\nconst isActiveNames = Object.values(IsActiveMap);\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '30%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: \"43%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"is_active\",\n        label: \"Ativo?\",\n        width: \"4%\",\n        options: {\n            filterOptions: {\n                names: ['Sim', 'Nao']\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return value ? <BadgeYes/> : <BadgeNo/>\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"10%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{formatFromISO(value, 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Ações\",\n        width: \"13%\",\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <IconButton\n                        color={'secondary'}\n                        component={Link}\n                        to={`/categories/${tableMeta.rowData[0]}/edit`}\n                    >\n                        <EditIcon />\n                    </IconButton>\n                )\n            }\n        }\n    }\n]\n\nconst debounceTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15,25,50]\n\nconst Table = () => {\n\n    const {enqueueSnackbar} = useSnackbar();\n    const subscribed = useRef(true); //current:true\n    const [data, setData] = useState<Category[]>([]);\n    const loading = useContext(LoadingContext);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n    const extraFilter = useMemo(() => ({\n            createValidationSchema: () => {\n                return yup.object().shape({\n                    is_active: yup.string()\n                        .nullable()\n                        .transform(value => {\n                            return !value || !isActiveNames.includes(value)? undefined: value;\n                        })\n                        .default(null)\n                })\n            },\n            formatSearchParams: (debouncedState: any) => {\n                return debouncedState.extraFilter \n                    ? {\n                        ...(\n                            debouncedState.extraFilter.is_active &&\n                            {is_active: debouncedState.extraFilter.is_active}\n                        )\n                    } \n                    : undefined\n            },\n            getStateFromURL: (queryParams: any) => {\n                return {\n                    is_active: queryParams.get('is_active')\n                }\n            }\n    }),[]);\n\n    const {\n        columns, \n        filterManager,\n        cleanSearchText,\n        filterState, \n        debounceFilterState,\n        totalRecords, \n        setTotalRecords\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debounceTime,\n        tableRef: tableRef,\n        rowsPerPage: rowsPerPage,\n        rowsPerPageOptions: rowsPerPageOptions,\n        extraFilter\n    });\n    const searchText = cleanSearchText(debounceFilterState.search);\n    const indexColumnIsActive = columns.findIndex(c => c.name === 'is_active');\n    const columnIsActive = columns[indexColumnIsActive];\n    const isActiveFilterValue = filterState.extraFilter && filterState.extraFilter.is_active as never;\n    (columnIsActive.options as any).filterList = isActiveFilterValue ? [isActiveFilterValue] : [];\n\n    const getData = useCallback(async ({search, page, per_page, sort, dir, is_active}) => {\n        try {\n            const {data} = await categoryHttp.list<ListResponse<Category>>({\n                queryParams: {\n                    search,\n                    page,\n                    per_page,\n                    sort,\n                    dir,\n                    ...(is_active && {is_active: invert(IsActiveMap)[is_active]})\n                }\n            });\n            if(subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch(error) {\n            console.error(error);\n            if(categoryHttp.isCancelledRequest(error)) {\n               return; \n            }\n            enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                {variant: 'error'}\n            );\n        }\n    }, [enqueueSnackbar, setTotalRecords]);\n\n\n    //componentDidUpdate\n    useEffect(() => {\n        subscribed.current = true;\n        getData({\n            search: searchText,\n            page: debounceFilterState.pagination.page,\n            per_page: debounceFilterState.pagination.per_page,\n            sort: debounceFilterState.order.sort,\n            dir: debounceFilterState.order.dir,\n            ...(debounceFilterState.extraFilter && debounceFilterState.extraFilter.is_active && {is_active: debounceFilterState.extraFilter.is_active})\n        });\n        return () => {\n            subscribed.current = false;\n        };\n    }, [\n        getData,\n        searchText, \n        debounceFilterState.pagination.page, \n        debounceFilterState.pagination.per_page, \n        debounceFilterState.order,\n        debounceFilterState.extraFilter\n    ]);\n\n    return (\n        <MuiThemeProvider theme={makeActionStyles(columnsDefinition.length-1)}>\n            <DefaultTable \n                title=\"Listagem de categorias\"\n                columns={columns}\n                data={data}\n                loading ={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options ={{\n                    serverSide: true,\n                    searchText: filterState.search as any,\n                    page: filterState.pagination.page - 1,\n                    rowsPerPage: filterState.pagination.per_page,\n                    rowsPerPageOptions,\n                    count: totalRecords,\n                    onFilterChange: (column, filterList) => {\n                        const columnIndex = columns.findIndex(c => c.name === column);\n                        var data:any = {};\n                        if(column) {\n                            data = {[column as any] : filterList[columnIndex].length ? filterList[columnIndex][0]: null};\n                        } else {\n                            columns.forEach(c => {\n                                data[c.name as never] = null;\n                            });\n                        }\n                        filterManager.changeExtraFilter(data);\n                    },\n                    customToolbar: () => (\n                        <FilterResetButton handleClick={() => filterManager.resetFilter()} />\n                    ),\n                    onSearchChange: searchText => filterManager.changeSearch(searchText),\n                    onChangePage: page => filterManager.changePage(page),\n                    onChangeRowsPerPage: perPage => filterManager.changeRowsPerPage(perPage),\n                    onColumnSortChange: (changedColumn: string, direction: string)  =>  \n                        filterManager.changeColumnSort(changedColumn, direction)\n                }}\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","import { Box, Fab } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport Table from './Table';\n\nconst PageList = () => {\n    return (\n        <Page title=\"Listagem de categorias\">\n            <Box dir={'rtl'} paddingBottom={2}>\n                <Fab\n                    title=\"Adicionar categoria\"\n                    color={'secondary'}\n                    size=\"small\"\n                    component={Link}\n                    to=\"/categories/create\"\n                >\n                    <AddIcon/>\n                </Fab>                \n            </Box>\n            <Box>\n                <Table />\n            </Box>\n        </Page>\n    );\n};\n\nexport default PageList;","import { useCallback } from \"react\";\n\nexport const useYupValidationResolver = (validationSchema: any) =>\n    useCallback(\n        async data => {\n            try {\n                const values = await validationSchema.validate(data, {\n                    abortEarly: false\n                });\n                return {\n                    values,\n                    errors: {}\n                };\n            } catch (errors) {\n                console.error(errors);\n                return {\n                    values: {},\n                    errors: errors.inner.reduce(\n                        (allErrors: any, currentError: any) => ({\n                            ...allErrors,\n                            [currentError.path]: {\n                                type: currentError.type ?? \"validation\",\n                                message: currentError.message\n                            }   \n                        }),\n                        {}\n                    )\n                };\n            }\n        },\n        [validationSchema]\n    );","import { Box, Button, ButtonProps, makeStyles, Theme } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return {\n        submit: {\n            margin: theme.spacing(1)\n        }\n    }\n})\n\ninterface SubmitActionsProps {\n    disabledButtons?: boolean;\n    handleSave: () => void;\n}\n\nconst SubmitActions : React.FC<SubmitActionsProps> = (props) => {\n    const classes = useStyles();    \n\n    const buttonProps: ButtonProps = {\n        className: classes.submit,\n        color: 'secondary',\n        variant: 'contained',\n        disabled: props.disabledButtons === undefined ? false : props.disabledButtons,\n    };\n\n    return (\n        <Box dir={\"rtl\"}>\n            <Button {...buttonProps} onClick={props.handleSave}>Salvar</Button>\n            <Button {...buttonProps} type=\"submit\">Salvar e continuar editando</Button>\n        </Box>                \n    )\n}\n\n\nexport default SubmitActions;","import { Grid, GridProps, makeStyles } from '@material-ui/core'\nimport React from 'react'\n\nconst useStyles = makeStyles(theme => ({\n    gridItem: {\n        padding: theme.spacing(1, 0)\n    },\n}));\n\ninterface DefaultFormProps extends React.DetailedHTMLProps<React.FormHTMLAttributes<HTMLFormElement>, HTMLFormElement> {\n    GridContainerProps?: GridProps\n    GridItemProps?: GridProps\n}\n\nexport const DefaultForm: React.FunctionComponent<DefaultFormProps> = (props) => {\n    const classes = useStyles();\n    const {GridContainerProps, GridItemProps, ...other} = props;\n    return (\n        <form {...other}>\n            <Grid container {...GridContainerProps}>\n                <Grid className={classes.gridItem} item {...GridItemProps}>\n                    {props.children}\n                </Grid>\n            </Grid>\n        </form>\n    )\n}\n","import { Checkbox, FormControlLabel, TextField } from '@material-ui/core'\nimport { useContext, useEffect, useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useParams, useHistory } from 'react-router';\nimport categoryHttp from '../../util/http/category-http';\nimport * as yup from \"../../util/vendor/yup/yup\";\nimport { useYupValidationResolver } from '../../util/yup';\nimport { useSnackbar} from 'notistack';\nimport { Category } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport { DefaultForm } from '../../components/DefaultForm';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255),\n});\n\ntype FormData = {\n    name: string,\n    description: string,\n    is_active: boolean,\n};\n\nexport default function Form() {\n    const resolver = useYupValidationResolver(validationSchema);\n\n    const { register, handleSubmit, getValues, setValue, errors, reset, watch, trigger } = useForm<FormData>({\n        resolver,\n        defaultValues: {\n            is_active: true,\n            name: ''\n        }\n    });\n\n    const snackbar = useSnackbar()\n    const history = useHistory();\n    const {id} = useParams<any>();\n    const [category, setCategory] = useState<Category | null>(null);\n    const loading = useContext(LoadingContext);\n\n    useEffect(() => {\n        if(!id) {\n            return;\n        }\n        let isSubscribed = true;\n        (async () => {\n            try {\n                const {data} = await categoryHttp.get(id);\n                if(isSubscribed) {\n                    setCategory(data.data);\n                    reset(data.data);\n                }\n            } catch(error) {\n                console.error(error);\n                snackbar.enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    {variant: 'error'}\n                );\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        };\n    }, [id, snackbar, reset]);\n\n    useEffect(() =>{\n        register({name: \"is_active\"});\n    }, [register]);\n\n    async function onSubmit(formData: any, event: any) {\n        try {\n            const http = !category\n                ? categoryHttp.create(formData)\n                : categoryHttp.update(category.id, formData);\n            const {data} = await http;\n            snackbar.enqueueSnackbar('Categoria salva com sucesso', {\n                variant: 'success'\n            });\n\n            setTimeout( () => {\n                event \n                ? (\n                    category \n                        ? history.replace(`/categories/${data.data.id}/edit`)\n                        : history.push(`/categories/${data.data.id}/edit`)                        \n\n                )\n                : history.push('/categories');\n            })\n\n        } catch(error) {\n            console.error(error);\n            snackbar.enqueueSnackbar('Nao foi possível salvar a categoria', {\n                variant: 'error'\n            });\n        }\n    }\n\n    return (\n        <DefaultForm GridItemProps={{xs: 12, md: 6}}  onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={\"outlined\"}\n                inputRef={register}\n                disabled={loading}\n                InputLabelProps={{shrink:true}}\n                error={errors.name !== undefined}\n                helperText={errors.name && errors.name.message}\n            />\n            <TextField\n                name=\"description\"\n                label=\"Descrição\"\n                multiline\n                rows=\"4\"\n                fullWidth\n                margin={\"normal\"}\n                variant={\"outlined\"}\n                inputRef={register}\n                disabled={loading}\n                InputLabelProps={{shrink:true}}\n            />\n            <FormControlLabel\n                label={'Ativo?'}\n                labelPlacement={'end'}\n                disabled={loading}\n                control={\n                    <Checkbox\n                        name=\"is_active\"\n                        color={\"primary\"}\n                        onChange={() => setValue('is_active', !getValues()['is_active'])}\n                        checked={watch('is_active')}\n                    />\n                }\n            />\n            <SubmitActions \n                disabledButtons={loading}\n                handleSave={() => trigger().then((isValid) => {isValid && onSubmit(getValues(), null)})} \n            />\n        </DefaultForm>\n    )\n}\n","import { Page } from '../../components/Page';\nimport {useParams} from 'react-router';\nimport Form from './Form';\n\nexport default function PageForm() {\n    const {id} = useParams<any>();\n    return (\n        <Page title = {!id ? 'Criar categoria' : 'Editar categoria'}>\n            <Form/>\n        </Page>\n    )\n}\n","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resources\";\n\nconst genreHttp = new HttpResource(httpVideo, \"genres\");\n\nexport default genreHttp;","import { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { invert } from \"lodash\";\nimport { useSnackbar } from 'notistack';\nimport { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { BadgeNo, BadgeYes } from '../../components/Badge';\nimport LoadingContext from '../../components/loading/LoadingContext';\nimport DefaultTable, { makeActionStyles, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport useFilter from '../../hooks/useFilter';\nimport { formatFromISO } from '../../util/date';\nimport categoryHttp from '../../util/http/category-http';\nimport genreHttp from '../../util/http/genre-http';\nimport { ListResponse, Genre, Category, IsActiveMap } from '../../util/models';\nimport * as yup from \"../../util/vendor/yup/yup\";\n\nconst isActiveNames = Object.values(IsActiveMap);\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '25%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: \"25%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"categories\",\n        label: \"Categorias\",\n        width: \"20%\",\n        options: {\n            filterType: \"multiselect\",\n            filterOptions: {\n                names: []\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{value?.map( (el:any) => (el.name)).join(\", \")}</span>;\n            }\n        }\n    },    \n    {\n        name: \"is_active\",\n        label: \"Ativo?\",\n        width: \"4%\",\n        options: {\n            filterOptions: {\n                names: ['Sim', 'Nao']\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return value ? <BadgeYes/> : <BadgeNo/>\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"10%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{formatFromISO(value, 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Acoes\",\n        width: \"8%\",\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <IconButton\n                        color={'secondary'}\n                        component={Link}\n                        to={`/genres/${tableMeta.rowData[0]}/edit`}\n                    >\n                        <EditIcon />\n                    </IconButton>\n                )\n            }\n        }\n    }\n]\n\nconst debounceTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15,25,50]\n\n\nconst Table = () => {\n\n    const {enqueueSnackbar} = useSnackbar();\n    const subscribed = useRef(true); //current:true    \n    const [data, setData] = useState<Genre[]>([]);\n    const [, setCategories] = useState<Category[]>([]);\n    const loading = useContext(LoadingContext);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n    const extraFilter = useMemo(() => ({\n            createValidationSchema: () => {\n                return yup.object().shape({\n                    categories: yup.mixed()\n                        .nullable()\n                        .transform(value => {\n                            return !value || value ==='' ? undefined: value.split(',');\n                        })\n                        .default(null),\n                    is_active: yup.string()\n                        .nullable()\n                        .transform(value => {\n                            return !value || !isActiveNames.includes(value)? undefined: value;\n                        })\n                        .default(null)\n\n                })\n            },\n            formatSearchParams: (debouncedState: any) => {\n                return debouncedState.extraFilter \n                    ? {\n                        ...(\n                            debouncedState.extraFilter.categories && {categories: debouncedState.extraFilter.categories.join(',')}\n                        ),\n                        ...(\n                            debouncedState.extraFilter.is_active && {is_active: debouncedState.extraFilter.is_active}\n                        )\n                    } \n                    : undefined\n            },\n            getStateFromURL: (queryParams: any) => {\n                return {\n                    categories: queryParams.get('categories'),\n                    is_active: queryParams.get('is_active')\n                }\n            }\n    }),[]);\n\n    const {\n        columns, \n        filterManager, \n        cleanSearchText,\n        filterState, \n        debounceFilterState,\n        totalRecords, \n        setTotalRecords\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debounceTime,\n        tableRef: tableRef,\n        rowsPerPage: rowsPerPage,\n        rowsPerPageOptions: rowsPerPageOptions,\n        extraFilter\n    });\n    const searchText = cleanSearchText(debounceFilterState.search);\n    const indexColumnCategories = columns.findIndex(c => c.name === 'categories');\n    const columnCategories = columns[indexColumnCategories];\n    const categoriesFilterValue = filterState.extraFilter && filterState.extraFilter.categories;\n    (columnCategories.options as any).filterList = categoriesFilterValue ? categoriesFilterValue : [];\n    const indexColumnIsActive = columns.findIndex(c => c.name === 'is_active');\n    const columnIsActive = columns[indexColumnIsActive];\n    const isActiveFilterValue = filterState.extraFilter && filterState.extraFilter.is_active as never;\n    (columnIsActive.options as any).filterList = isActiveFilterValue ? [isActiveFilterValue] : [];\n\n    const getData = useCallback(async ({search, page, per_page, sort, dir, categories, is_active}) => {\n        try {\n            const {data} = await genreHttp.list<ListResponse<Genre>>({\n                queryParams: {\n                    search,\n                    page,\n                    per_page,\n                    sort,\n                    dir,\n                    ...(categories && {categories: categories.join(',')}),\n                    ...(is_active && {is_active: invert(IsActiveMap)[is_active]})\n                }\n            });\n            if(subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch(error) {\n            console.error(error);\n            if(genreHttp.isCancelledRequest(error)) {\n               return; \n            }\n            enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                {variant: 'error'}\n            );\n        }\n    }, [enqueueSnackbar, setTotalRecords]);\n\n    useEffect(()=> {\n        let isSubscribed = true;\n        (async () => {\n            try {\n                if(isSubscribed) {\n                    const {data} = await categoryHttp.list<ListResponse<Category>>({queryParams: {all:''}});\n                    setCategories(data.data);\n                    (columnCategories.options as any).filterOptions.names = data.data.map(category => category.name);\n                }\n\n            } catch (error) {\n                console.error(error);\n                enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    {variant: 'error'}\n                );\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        }\n    }, [enqueueSnackbar, columnCategories.options])\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData({\n            search: searchText,\n            page: debounceFilterState.pagination.page,\n            per_page: debounceFilterState.pagination.per_page,\n            sort: debounceFilterState.order.sort,\n            dir: debounceFilterState.order.dir,\n            ...(debounceFilterState.extraFilter && debounceFilterState.extraFilter.categories && {categories: debounceFilterState.extraFilter.categories.join(',')}),\n            ...(debounceFilterState.extraFilter && debounceFilterState.extraFilter.is_active && {is_active: invert(IsActiveMap)[debounceFilterState.extraFilter.is_active]})\n        });\n        return () => {\n            subscribed.current = false;\n        };\n    }, [\n        getData,\n        searchText, \n        debounceFilterState.pagination.page, \n        debounceFilterState.pagination.per_page, \n        debounceFilterState.order,\n        debounceFilterState.extraFilter\n    ]);\n\n    return (\n        <MuiThemeProvider theme={makeActionStyles(columnsDefinition.length-1)}>\n            <DefaultTable \n                title=\"Listagem de gêneros\"\n                columns={columns}\n                data={data}\n                loading ={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options ={{\n                    serverSide: true,\n                    searchText: filterState.search as any,\n                    page: filterState.pagination.page - 1,\n                    rowsPerPage: filterState.pagination.per_page,\n                    rowsPerPageOptions,\n                    count: totalRecords,\n                    onFilterChange: (column, filterList) => {\n                        const columnIndex = columns.findIndex(c => c.name === column);\n                        filterManager.changeExtraFilter({\n                            [column as any] : filterList[columnIndex].length ? filterList[columnIndex] : null\n                        })\n                    },\n                    customToolbar: () => (\n                        <FilterResetButton handleClick={() => filterManager.resetFilter()} />\n                    ),\n                    onSearchChange: searchText => filterManager.changeSearch(searchText),\n                    onChangePage: page => filterManager.changePage(page),\n                    onChangeRowsPerPage: perPage => filterManager.changeRowsPerPage(perPage),\n                    onColumnSortChange: (changedColumn: string, direction: string)  =>  \n                        filterManager.changeColumnSort(changedColumn, direction)\n                }}\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","import { Box, Fab } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport Table from './Table';\n\nconst PageList = () => {\n    return (\n        <Page title=\"Listagem de gêneros\">\n            <Box dir={'rtl'} paddingBottom={2}>\n                <Fab\n                    title=\"Adicionar gêneros\"\n                    color={'secondary'}\n                    size=\"small\"\n                    component={Link}\n                    to=\"/genres/create\"\n                >\n                    <AddIcon/>\n                </Fab>                \n            </Box>\n            <Box>\n                <Table />\n            </Box>\n        </Page>\n    );\n};\n\nexport default PageList;","import { Checkbox, FormControlLabel, MenuItem, TextField } from '@material-ui/core'\nimport { useState, useEffect, useContext } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useParams, useHistory } from 'react-router';\nimport genreHttp from '../../util/http/genre-http';\nimport categoryHttp from '../../util/http/category-http';\nimport * as yup from \"../../util/vendor/yup/yup\";\nimport { useYupValidationResolver } from '../../util/yup';\nimport { useSnackbar} from 'notistack';\nimport { Category, Genre } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport { DefaultForm } from '../../components/DefaultForm';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255),\n    categories_id: yup.array()\n        .label('Categorias')\n        .required()\n        .min(1),\n});\n\nexport default function Form() {\n    const resolver = useYupValidationResolver(validationSchema);\n\n    const { register, handleSubmit, getValues, setValue, errors, reset, watch, trigger } = useForm<{name:any, categories_id:any, is_active:any}>({\n        resolver,\n        defaultValues: {\n            categories_id: [],\n            is_active: true\n        }\n    });\n    const {enqueueSnackbar} = useSnackbar()\n    const history = useHistory();\n    const {id} = useParams<any>();\n    const [genre, setGenre] = useState<Genre | null>(null);\n    const [categories, setCategories] = useState<Category[]>([]);\n    const loading = useContext(LoadingContext);\n\n    useEffect(() => {\n        let isSubscribed = true;\n        (async () => {\n            const promises = [categoryHttp.list({queryParams: {all: ''}})];            \n            if(id) {\n                promises.push(genreHttp.get(id));\n            }\n            try {\n                const [categoriesResponse, genreResponse] = await Promise.all(promises);\n                if(isSubscribed) {\n                    setCategories(categoriesResponse.data.data);\n                    if(id) {\n                        setGenre(genreResponse.data.data);\n                        reset({\n                            ...genreResponse.data.data,\n                            categories_id: genreResponse.data.data.categories.map((category:any) => category.id)\n                        });\n                    }\n                }\n            } catch (error) {\n                enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    {variant: 'error'}\n                );\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        };\n    }, [id, enqueueSnackbar, reset]);\n\n    useEffect(() => {\n        register({name: \"categories_id\"});\n        register({name: \"is_active\"});\n    }, [register]);\n\n    async function onSubmit(formData: any, event: any) {\n        try {\n            const http = !genre\n                ? genreHttp.create(formData)\n                : genreHttp.update(genre.id, formData);\n            const {data} = await http;\n            enqueueSnackbar('Gênero salvo com sucesso', {\n                variant: 'success'\n            });\n            setTimeout( () => {\n                event \n                ? (\n                    genre \n                        ? history.replace(`/genres/${data.data.id}/edit`)\n                        : history.push(`/genres/${data.data.id}/edit`)                        \n\n                )\n                : history.push('/genres');\n            })\n        } catch (error) {\n            console.error(error);\n            enqueueSnackbar('Nao foi possível salvar o gênero', {\n                variant: 'error'\n            });\n        }\n    }\n\n    return (\n        <DefaultForm GridItemProps={{xs: 12, md: 6}}  onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={\"outlined\"}\n                inputRef={register}\n                disabled={loading}\n                InputLabelProps={{shrink:true}}\n                error={errors.name !== undefined}\n                helperText={errors.name && errors.name.message}\n            />\n            <TextField\n                select\n                name=\"categories_id\"\n                label=\"Categorias\"\n                fullWidth\n                margin={\"normal\"}\n                variant={\"outlined\"}\n                value={watch('categories_id')}\n                onChange={(e) => {\n                    setValue(\"categories_id\", e.target.value);\n                }}\n                disabled={loading}\n                InputLabelProps={{shrink:true}}\n                SelectProps={{\n                    multiple: true\n                }}\n                error={errors.categories_id !== undefined}\n                helperText={errors.categories_id && errors.categories_id.message}\n            >\n                <MenuItem value=\"\" disabled>\n                    <em>Selecione categorias</em>\n                </MenuItem>\n                {\n                    categories.map(\n                        (category, key) => (<MenuItem key={key} value={category.id}>{category.name}</MenuItem>)\n                    )\n                }\n            </TextField>\n            <FormControlLabel\n                label={'Ativo?'}\n                labelPlacement={'end'}\n                disabled={loading}\n                control={\n                    <Checkbox\n                        name=\"is_active\"\n                        color={\"primary\"}\n                        onChange={() => setValue('is_active', !getValues()['is_active'])}\n                        checked={watch('is_active')}\n                    />\n                }\n            />\n            <SubmitActions \n                disabledButtons={loading}\n                handleSave={() => trigger().then((isValid) => {isValid && onSubmit(getValues(), null)})} \n            />\n        </DefaultForm>\n    )\n}\n","import { Page } from '../../components/Page'\nimport {useParams} from 'react-router';\nimport Form from './Form'\n\nexport default function PageForm() {\n    const {id} = useParams<any>();\n    return (\n        <Page title = {!id ? 'Criar gênero' : 'Editar gênero'}>\n            <Form/>\n        </Page>\n    )\n}\n","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resources\";\n\nconst castMemberHttp = new HttpResource(httpVideo, \"cast_members\");\n\nexport default castMemberHttp;","import { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { invert } from \"lodash\";\nimport { useSnackbar } from 'notistack';\nimport { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nimport DefaultTable, { makeActionStyles, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport useFilter from '../../hooks/useFilter';\nimport { formatFromISO } from '../../util/date';\nimport castMemberHttp from '../../util/http/castmember-http';\nimport { CastMember, CastMemberTypeMap, ListResponse } from '../../util/models';\nimport * as yup from \"../../util/vendor/yup/yup\";\n\nconst castMemberNames = Object.values(CastMemberTypeMap);\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '30%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: '27%',\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"type\",\n        label: \"Type\",\n        width: '20%',\n        options: {\n            filterOptions: {\n                names: castMemberNames\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{`${value} - ${CastMemberTypeMap[value as never]}`}</span>\n            },\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"10%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{formatFromISO(value, 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Acoes\",\n        width: \"13%\",\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <IconButton\n                        color={'secondary'}\n                        component={Link}\n                        to={`/cast-members/${tableMeta.rowData[0]}/edit`}\n                    >\n                        <EditIcon />\n                    </IconButton>\n                )\n            }\n        }\n    }\n]\n\nconst debounceTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15,25,50]\n\nconst Table = () => {\n\n    const {enqueueSnackbar} = useSnackbar();\n    const subscribed = useRef(true); //current:true    \n    const [data, setData] = useState<CastMember[]>([]);\n    const loading = useContext(LoadingContext);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n    const extraFilter = useMemo(() => ({\n            createValidationSchema: () => {\n                return yup.object().shape({\n                    type: yup.string()\n                        .nullable()\n                        .transform(value => {\n                            return !value || !castMemberNames.includes(value)? undefined: value;\n                        })\n                        .default(null)\n                })\n            },\n            formatSearchParams: (debouncedState:any) => {\n                return debouncedState.extraFilter \n                    ? {\n                        ...(\n                            debouncedState.extraFilter.type &&\n                            {type: debouncedState.extraFilter.type}\n                        )\n                    } \n                    : undefined\n            },\n            getStateFromURL: (queryParams:any) => {\n                return {\n                    type: queryParams.get('type')\n                }\n            }\n    }),[]);\n\n    const {\n        columns, \n        filterManager,\n        cleanSearchText,\n        filterState, \n        debounceFilterState,\n        totalRecords, \n        setTotalRecords\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debounceTime,\n        tableRef: tableRef,\n        rowsPerPage: rowsPerPage,\n        rowsPerPageOptions: rowsPerPageOptions,\n        extraFilter\n    });\n    const searchText = cleanSearchText(debounceFilterState.search);\n    const indexColumnType = columns.findIndex(c => c.name === 'type');\n    const columnType = columns[indexColumnType];\n    const typeFilterValue = filterState.extraFilter && filterState.extraFilter.type as never;\n    (columnType.options as any).filterList = typeFilterValue ? [typeFilterValue] : [];\n\n    const getData = useCallback(async ({search, page, per_page, sort, dir, type}) => {\n        try {\n            const {data} = await castMemberHttp.list<ListResponse<CastMember>>({\n                queryParams: {\n                    search,\n                    page,\n                    per_page,\n                    sort,\n                    dir,\n                    ...(type && {type: invert(CastMemberTypeMap)[type]})\n                }\n            });\n            if(subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch(error) {\n            console.error(error);\n            if(castMemberHttp.isCancelledRequest(error)) {\n               return; \n            }\n            enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                {variant: 'error'}\n            );\n        }\n    }, [enqueueSnackbar, setTotalRecords]);\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData({\n            search: searchText,\n            page: debounceFilterState.pagination.page,\n            per_page: debounceFilterState.pagination.per_page,\n            sort: debounceFilterState.order.sort,\n            dir: debounceFilterState.order.dir,\n            ...(debounceFilterState.extraFilter && debounceFilterState.extraFilter.type && {type: debounceFilterState.extraFilter.type})\n        });\n        return () => {\n            subscribed.current = false;\n        };\n    }, [\n        getData,\n        searchText, \n        debounceFilterState.pagination.page, \n        debounceFilterState.pagination.per_page, \n        debounceFilterState.order,\n        debounceFilterState.extraFilter\n    ]);\n\n    return (\n        <MuiThemeProvider theme={makeActionStyles(columnsDefinition.length-1)}>\n            <DefaultTable \n                title=\"Listagem de membros do elenco\"\n                columns={columns}\n                data={data}\n                loading ={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options ={{\n                    serverSide: true,\n                    searchText: filterState.search as any,\n                    page: filterState.pagination.page - 1,\n                    rowsPerPage: filterState.pagination.per_page,\n                    rowsPerPageOptions,\n                    count: totalRecords,\n                    onFilterChange: (column, filterList) => {\n                        const columnIndex = columns.findIndex(c => c.name === column);\n                        var data:any = {};\n                        if(column) {\n                            data = {[column as never] : filterList[columnIndex].length ? filterList[columnIndex][0]: null};\n                        } else {\n                            columns.forEach(c => {\n                                data[c.name as never] = null;\n                            });\n                        }\n                        filterManager.changeExtraFilter(data);\n                    },\n                    customToolbar: () => (\n                        <FilterResetButton handleClick={() => filterManager.resetFilter()} />\n                    ),\n                    onSearchChange: searchText => { \n                        filterManager.changeSearch(searchText);\n                    },\n                    onChangePage: page => filterManager.changePage(page),\n                    onChangeRowsPerPage: perPage => filterManager.changeRowsPerPage(perPage),\n                    onColumnSortChange: (changedColumn: string, direction: string)  =>  \n                        filterManager.changeColumnSort(changedColumn, direction)\n                }}\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","import { Box, Fab } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport Table from './Table';\n\nconst PageList = () => {\n    return (\n        <Page title=\"Listagem de membros do elenco\">\n            <Box dir={'rtl'} paddingBottom={2}>\n                <Fab\n                    title=\"Adicionar membro do elenco\"\n                    color={'secondary'}\n                    size=\"small\"\n                    component={Link}\n                    to=\"/cast-members/create\"\n                >\n                    <AddIcon/>\n                </Fab>                \n            </Box>\n            <Box>\n                <Table />\n            </Box>\n        </Page>\n    );\n};\n\nexport default PageList;","import { FormControl, FormControlLabel, FormHelperText, FormLabel, Radio, RadioGroup, TextField } from '@material-ui/core'\nimport { useContext, useEffect, useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useParams, useHistory } from 'react-router';\nimport castMemberHttp from '../../util/http/castmember-http';\nimport * as yup from \"../../util/vendor/yup/yup\";\nimport { useYupValidationResolver } from '../../util/yup';\nimport { useSnackbar} from 'notistack';\nimport { CastMember } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport { DefaultForm } from '../../components/DefaultForm';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255),\n    type: yup.number()\n        .label('Tipo')\n        .required(),\n});\n\ntype FormData = {\n    name: string,\n    type: bigint,\n};\n\nexport default function Form() {\n    const resolver = useYupValidationResolver(validationSchema);\n    \n    const { register, handleSubmit, getValues, setValue, errors, reset, watch, trigger } = useForm<FormData>({\n        resolver,\n        defaultValues: {\n            name: ''\n        }\n    });\n\n    const snackbar = useSnackbar()\n    const history = useHistory();\n    const {id} = useParams<any>();\n    const [castMember, setCastMember] = useState<CastMember | null>(null);\n    const loading = useContext(LoadingContext);\n\n    useEffect(() => {\n        if(!id) {\n            return;\n        }\n        let isSubscribed = true;\n        (async () => {\n            try {\n                const {data} = await castMemberHttp.get(id);\n                if(isSubscribed) {\n                    setCastMember(data.data);\n                    reset(data.data);\n                }\n            } catch(error) {\n                console.error(error);\n                snackbar.enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    {variant: 'error'}\n                );\n            }\n\n            return () => {\n                isSubscribed = false;\n            };\n        })();\n    }, [id, snackbar, reset]);\n\n    useEffect( () => {\n        register({name: \"type\"})\n    }, [register]);\n    \n    async function onSubmit(formData: any, event: any) {\n        try {\n            const http = !castMember\n                ? castMemberHttp.create(formData)\n                : castMemberHttp.update(castMember.id, formData);\n            const {data} = await http;\n            snackbar.enqueueSnackbar('Membro de elenco salvo com sucesso', {\n                variant: 'success'\n            });\n            setTimeout( () => {\n                event \n                ? (\n                    castMember \n                        ? history.replace(`/cast-members/${data.data.id}/edit`)\n                        : history.push(`/cast-members/${data.data.id}/edit`)                        \n\n                )\n                : history.push('/cast-members');\n            })\n        } catch (error) {\n            console.error(error);\n            snackbar.enqueueSnackbar('Nao foi possível salvar o membro de elenco', {\n                variant: 'error'\n            });\n        }\n    }\n\n    return (\n        <DefaultForm GridItemProps={{xs: 12, md: 6}}  onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={\"outlined\"}\n                inputRef={register}\n                disabled={loading}\n                InputLabelProps={{shrink:true}}\n                error={errors.name !== undefined}\n                helperText={errors.name && errors.name.message}\n            />\n            <FormControl \n                margin={\"normal\"}\n                disabled={loading}\n                error={errors.type !== undefined}\n            >\n                <FormLabel component=\"legend\">Tipo</FormLabel>\n                <RadioGroup\n                    name=\"type\"\n                    onChange={(e) => {\n                        setValue(\"type\", parseInt(e.target.value));\n                    }}\n                    value={watch('type') + \"\"}\n                >\n                    <FormControlLabel value=\"1\" control={<Radio />} label=\"Diretor\" />\n                    <FormControlLabel value=\"2\" control={<Radio />} label=\"Ator\" />\n                </RadioGroup>\n                {\n                    errors.type && <FormHelperText id=\"type-helper-text\">{errors.type.message}</FormHelperText>\n                }         \n            </FormControl>\n            <SubmitActions \n                disabledButtons={loading}\n                handleSave={() => trigger().then((isValid) => {isValid && onSubmit(getValues(), null)})} \n            />\n        </DefaultForm>\n    )\n}\n","import { Page } from '../../components/Page'\nimport {useParams} from 'react-router';\nimport Form from './Form'\n\nexport default function PageForm() {\n    const {id} = useParams<any>();    \n    return (\n        <Page title = {!id ? 'Criar membro do elenco' : 'Editar membro do elenco'}>\n            <Form/>\n        </Page>\n    )\n}\n","import React from 'react'\nimport {Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@material-ui/core\";\n\ninterface DeleteDialogProps {\n    open: boolean;\n    handleClose: (confirmed: boolean) => void;\n}\n\nconst DeleteDialog: React.FC<DeleteDialogProps> = (props) => {\n\n    const {open, handleClose} = props;\n\n    return (\n        <Dialog\n            open={open}\n            onClose={() => handleClose(false)}\n        >\n            <DialogTitle>\n                Exclusao de registros\n            </DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Deseja realmente excluir este(s) registro(s)?\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => handleClose(false)} color=\"primary\">\n                    Cancelar\n                </Button>\n                <Button onClick={() => handleClose(true)} color=\"primary\" autoFocus>\n                    Excluir\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default DeleteDialog;","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resources\";\nimport { AxiosResponse } from \"axios\";\nimport { Video } from '../models';\n\nclass VideoHttp extends HttpResource {\n    addFile(id: any, data: any): Promise<AxiosResponse<Video>> {\n        return this.http.post<Video>(`videos/${id}`, data);\n    }\n}\n\nconst videoHttp = new VideoHttp(httpVideo, \"videos\");\n\nexport default videoHttp;","import {useEffect, useState} from 'react';\n\nconst useDeleteCollection = () => {\n    const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n    const [rowsToDelete, setRowsToDelete] = useState<{data: Array<{index:any, dataIndex:any}>}>({data: []})\n\n    useEffect( () => {\n        if(rowsToDelete.data.length) {\n            setOpenDeleteDialog(true);\n        }\n    }, [rowsToDelete]);\n\n    return {\n        openDeleteDialog, setOpenDeleteDialog, rowsToDelete, setRowsToDelete\n    }\n};\n\nexport default useDeleteCollection;\n","import { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { useSnackbar } from 'notistack';\nimport { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport DefaultTable, { makeActionStyles, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport DeleteDialog from '../../components/DeleteDialog'\nimport useFilter from '../../hooks/useFilter';\nimport { formatFromISO } from '../../util/date';\nimport genreHttp from '../../util/http/genre-http';\nimport videoHttp from '../../util/http/video-http';\nimport { ListResponse, Video } from '../../util/models';\nimport useDeleteCollection from '../../hooks/useDeleteCollection';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '37%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"title\",\n        label: \"Titulo\",\n        width: \"20%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"genres\",\n        label: \"Generos\",\n        width: \"15%\",\n        options: {\n            filterType: \"multiselect\",\n            filterOptions: {\n                names: []\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{value?.map( (el:any) => (el.name)).join(\",\")}</span>;\n            }\n        }\n    },    \n    {\n        name: \"categories\",\n        label: \"Categorias\",\n        width: \"15%\",\n        options: {\n            filterType: \"multiselect\",\n            filterOptions: {\n                names: []\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{value?.map( (el:any) => (el.name)).join(\", \")}</span>;\n            }\n        }\n    },    \n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"10%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{formatFromISO(value, 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Acoes\",\n        width: \"3%\",\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <IconButton\n                        color={'secondary'}\n                        component={Link}\n                        to={`/videos/${tableMeta.rowData[0]}/edit`}\n                    >\n                        <EditIcon />\n                    </IconButton>\n                )\n            }\n        }\n    }\n]\n\nconst debounceTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15,25,50]\n\nconst Table = () => {\n\n    const {enqueueSnackbar} = useSnackbar();\n    const subscribed = useRef(true); //current:true    \n    const [data, setData] = useState<Video[]>([]);\n    const loading = useContext(LoadingContext);\n    const {openDeleteDialog, setOpenDeleteDialog, rowsToDelete, setRowsToDelete} = useDeleteCollection();\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;    \n    const {\n        columns, \n        filterManager,\n        cleanSearchText,\n        filterState, \n        debounceFilterState,\n        totalRecords, \n        setTotalRecords\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debounceTime,\n        tableRef: tableRef,\n        rowsPerPage: rowsPerPage,\n        rowsPerPageOptions: rowsPerPageOptions\n    });\n    const searchText = cleanSearchText(debounceFilterState.search);\n\n    const getData = useCallback(async ({search, page, per_page, sort, dir}) => {\n        try {\n            const {data} = await videoHttp.list<ListResponse<Video>>({\n                queryParams: {\n                    search,\n                    page,\n                    per_page,\n                    sort,\n                    dir\n                }\n            });\n            if(subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n                if(openDeleteDialog) {\n                    setOpenDeleteDialog(false);\n                }\n            }\n        } catch(error) {\n            console.error(error);\n            if(genreHttp.isCancelledRequest(error)) {\n               return; \n            }\n            enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                {variant: 'error'}\n            );\n        }\n    }, [enqueueSnackbar, openDeleteDialog, setOpenDeleteDialog, setTotalRecords]);\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData({\n            search: searchText,\n            page: debounceFilterState.pagination.page,\n            per_page: debounceFilterState.pagination.per_page,\n            sort: debounceFilterState.order.sort,\n            dir: debounceFilterState.order.dir\n        });\n        return () => {\n            subscribed.current = false;\n        };\n    }, [\n        getData,\n        searchText, \n        debounceFilterState.pagination.page, \n        debounceFilterState.pagination.per_page, \n        debounceFilterState.order\n    ]);\n\n    function deleteRows(confirmed: boolean) {\n        if(!confirmed) {\n            setOpenDeleteDialog(false);\n            return;\n        }\n        const ids = rowsToDelete\n            .data\n            .map((value) => data[value.index].id)\n            .join(',');\n        videoHttp\n            .deleteCollection({ids})\n            .then(response => {\n                enqueueSnackbar('Registros excluido com sucesso', {\n                    variant: 'success'\n                });\n                if( filterState.pagination.page > 1 \n                    && rowsToDelete.data.length === filterState.pagination.per_page) {\n                    const page = filterState.pagination.page -2;\n                    filterManager.changePage(page);\n                }\n                else {\n                    getData({\n                        search: searchText,\n                        page: debounceFilterState.pagination.page,\n                        per_page: debounceFilterState.pagination.per_page,\n                        sort: debounceFilterState.order.sort,\n                        dir: debounceFilterState.order.dir\n                    });\n                }\n            })\n            .catch((error) => {\n                console.error(error);\n                enqueueSnackbar(\n                    'Nao foi possivel excluir os registros',\n                    {variant: 'error'}\n                );\n            });\n    }\n\n    return (\n        <MuiThemeProvider theme={makeActionStyles(columnsDefinition.length-1)}>\n            <DeleteDialog open={openDeleteDialog} handleClose={deleteRows} />\n            <DefaultTable \n                title=\"Listagem de videos\"\n                columns={columns}\n                data={data}\n                loading ={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options ={{\n                    serverSide: true,\n                    searchText: filterState.search as any,\n                    page: filterState.pagination.page - 1,\n                    rowsPerPage: filterState.pagination.per_page,\n                    rowsPerPageOptions,\n                    count: totalRecords,\n                    onFilterChange: (column, filterList) => {\n                        const columnIndex = columns.findIndex(c => c.name === column);\n                        filterManager.changeExtraFilter({\n                            [column as any] : filterList[columnIndex].length ? filterList[columnIndex] : null\n                        })\n                    },\n                    customToolbar: () => (\n                        <FilterResetButton handleClick={() => filterManager.resetFilter()} />\n                    ),\n                    onSearchChange: searchText => filterManager.changeSearch(searchText),\n                    onChangePage: page => filterManager.changePage(page),\n                    onChangeRowsPerPage: perPage => filterManager.changeRowsPerPage(perPage),\n                    onColumnSortChange: (changedColumn: string, direction: string)  =>  \n                        filterManager.changeColumnSort(changedColumn, direction),\n                    onRowsDelete: (rowsDeleted: { \n                                        lookup: { [dataIndex: number]: boolean };\n                                        data: Array<{ index: number; dataIndex: number }>;\n                                    }, newTableData: any[]) => {\n                        setRowsToDelete(rowsDeleted as any);\n                        return false;\n                    }\n                }}\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","import { Box, Fab } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport Table from './Table';\n\nconst PageList = () => {\n    return (\n        <Page title=\"Listagem de videos\">\n            <Box dir={'rtl'} paddingBottom={2}>\n                <Fab\n                    title=\"Adicionar videos\"\n                    color={'secondary'}\n                    size=\"small\"\n                    component={Link}\n                    to=\"/videos/create\"\n                >\n                    <AddIcon/>\n                </Fab>                \n            </Box>\n            <Box>\n                <Table />\n            </Box>\n        </Page>\n    );\n};\n\nexport default PageList;","import React from 'react';\nimport {makeStyles, Typography} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n    root: {\n        width: '36px',\n        height: '36px',\n        fontSize: '1.2em',\n        color:'#fff',\n        borderRadius: '4px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n})\n\nconst backgroundColors = {\n    'L': '#398549',\n    '10': '#20A3D4',\n    '12': '#E79738',\n    '14': '#E35E00',\n    '16': '#D00003',\n    '18': '#000000'\n}\n\ninterface RatingProps {\n    rating: 'L' | '10' | '12' | '14' | '16' | '18'\n}\n\nconst Rating: React.FC<RatingProps> = (props) => {\n    const  classes = useStyles();\n    return (\n        <Typography\n            className={classes.root}\n            style={{\n                backgroundColor: backgroundColors[props.rating]\n            }}\n        >\n            {props.rating}\n        </Typography>\n    );\n}\n\nexport default Rating;\n","import { Box, FormControl, FormControlLabel, FormControlProps, FormControlLabelProps, FormHelperText, FormLabel, Radio, RadioGroup } from '@material-ui/core'\nimport React from 'react'\n\nimport Rating from '../../../components/Rating';\n\ninterface RatingFieldProps {\n    value: string;\n    setValue: (value:string) => void;\n    error: any;\n    disabled?: boolean;\n    FormControlProps?: FormControlProps;\n};\n\nconst ratings:FormControlLabelProps[] = [\n    {value: \"L\", control: <Radio color=\"primary\"/>, label: <Rating rating={'L'}/>, labelPlacement: \"top\"},\n    {value: \"10\", control: <Radio color=\"primary\"/>, label: <Rating rating={'10'}/>, labelPlacement: \"top\"},\n    {value: \"12\", control: <Radio color=\"primary\"/>, label: <Rating rating={'12'}/>, labelPlacement: \"top\"},\n    {value: \"14\", control: <Radio color=\"primary\"/>, label: <Rating rating={'14'}/>, labelPlacement: \"top\"},\n    {value: \"16\", control: <Radio color=\"primary\"/>, label: <Rating rating={'16'}/>, labelPlacement: \"top\"},\n    {value: \"18\", control: <Radio color=\"primary\"/>, label: <Rating rating={'18'}/>, labelPlacement: \"top\"},\n]\n\nexport const RatingField: React.FC<RatingFieldProps> = (props) => {\n    const {value, setValue, error, disabled} = props;\n    return (\n        <FormControl \n            disabled={disabled === true}\n            error={error !== undefined}\n            {...props.FormControlProps}\n        >\n            <FormLabel component=\"legend\">Classificacao</FormLabel>\n            <Box paddingTop={1}>\n                <RadioGroup\n                    name=\"rating\"\n                    onChange={(e) => {\n                        setValue(e.target.value);\n                    }}\n                    value={value || ''}\n                    row\n                >\n                {\n                    ratings.map(\n                        (props, key) => <FormControlLabel key={key} {...props} />\n                    )\n                }                \n                </RadioGroup>\n            </Box>\n            {\n                error && <FormHelperText>{error.message}</FormHelperText>\n            }         \n        </FormControl>\n    )\n}\n\nexport default RatingField;","import { InputAdornment, TextField, TextFieldProps } from '@material-ui/core';\nimport React, { MutableRefObject, RefAttributes, useImperativeHandle, useRef, useState } from 'react';\n\nexport interface InputFileProps extends RefAttributes<InputFileComponent> {\n    ButtonFile: React.ReactNode;\n    InputFileProps?: React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\n    TextFieldProps?: TextFieldProps;\n}\n\nexport interface InputFileComponent {\n    openWindow: () => void;\n    clear: () => void;\n}\n\nconst InputFile = React.forwardRef<InputFileComponent, InputFileProps>((props, ref) => {\n\n    const fileRef = useRef() as MutableRefObject<HTMLInputElement>;\n    const [fileName, setFileName] = useState('');\n\n    useImperativeHandle(ref, () => ({ \n        openWindow: () => fileRef.current.click(),\n        clear: () => setFileName(\"\")\n    }));\n\n    const textFieldProps: TextFieldProps = {\n        variant:'outlined',\n        ...props.TextFieldProps,\n        InputProps:{\n            ...(props.TextFieldProps && props.TextFieldProps.InputProps &&\n                {...props.TextFieldProps.InputProps}\n            ),\n            readOnly: true,\n            endAdornment:(\n                <InputAdornment position={\"end\"}>\n                    {props.ButtonFile}\n                </InputAdornment>\n            )\n        },\n        value: fileName\n    };\n\n    const inputFileProps = {\n        ...props.InputFileProps,\n        onChange(event: any) {\n            const files = event.target.files;\n            if(files.length) {\n                setFileName(Array.from(files).map((file:any) => file.name).join(','));\n            }\n            if(props.InputFileProps && props.InputFileProps.onChange) {\n                props.InputFileProps.onChange(event);\n            }\n        },\n        hidden: true,\n        ref: fileRef\n    }\n\n    return (\n        <>\n            <input type=\"file\" {...inputFileProps} />\n            <TextField {...textFieldProps}/>\n        </>\n    )\n});\n\nexport default InputFile;","import { Button, FormControl, FormControlProps } from '@material-ui/core'\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport React from 'react'\nimport { MutableRefObject, useImperativeHandle, useRef } from 'react';\n\nimport InputFile, { InputFileComponent } from '../../../components/InputFile';\n\ninterface UploadFieldProps {\n    accept: string;\n    label: string;\n    setValue: (value:string) => void;\n    error?: any;\n    disabled?: boolean;\n    FormControlProps?: FormControlProps;\n};\n\nexport interface UploadFieldComponent {\n    clear: () => void\n}\n\nconst UploadField = React.forwardRef<UploadFieldComponent, UploadFieldProps>((props, ref) => {\n    const fileRef = useRef() as MutableRefObject<InputFileComponent>;\n    const {accept, label, setValue, error, disabled} = props;\n\n    useImperativeHandle( ref, () => ({\n        clear: () => fileRef.current.clear()\n    }));\n\n    return (\n        <FormControl \n            disabled={disabled === true}\n            error={error !== undefined}\n            fullWidth\n            margin={\"normal\"}\n            {...props.FormControlProps}\n        >\n            <InputFile \n                ref={fileRef}\n                TextFieldProps={{\n                    label: label,\n                    InputLabelProps: {shrink: true},\n                    style: {backgroundColor: \"#ffffff\"}\n                }}\n                InputFileProps={{\n                    accept,\n                    onChange(event){\n                        const files = event.target.files as any;\n                        files.length && setValue(files[0]);\n                    }\n                }}\n                ButtonFile={\n                    <Button\n                        endIcon={<CloudUploadIcon />}\n                        variant={'contained'}\n                        color={'primary'}\n                        onClick={() => fileRef.current.openWindow()}\n                    >\n                        Adicionar\n                    </Button> \n                }\n            />           \n        </FormControl>\n    )\n});\n\nexport default UploadField;","import {CircularProgress, TextField} from \"@material-ui/core\";\nimport {TextFieldProps} from \"@material-ui/core/TextField\";\nimport {Autocomplete, AutocompleteProps} from \"@material-ui/lab\";\nimport React, {useState, useEffect, useImperativeHandle, RefAttributes} from 'react'\nimport { useDebounce } from 'use-debounce';\n\ninterface AsyncAutocompleteProps extends RefAttributes<AsyncAutocompleteComponent> {\n    fetchOptions: (searchText: string) => Promise<any>;\n    debounceTime?: number;\n    TextFieldProps? : TextFieldProps;\n    AutocompleteProps?: Omit<Omit<AutocompleteProps<any, boolean, boolean, boolean>, 'renderInput'>, 'options'>;\n}\n\nexport interface AsyncAutocompleteComponent {\n    clear: () => void\n}\n\nconst AsyncAutocomplete = React.forwardRef<AsyncAutocompleteComponent, AsyncAutocompleteProps>((props, ref) => {\n\n    const {AutocompleteProps, debounceTime = 300, fetchOptions} = props;\n    const {freeSolo = false, onOpen, onClose, onInputChange} = AutocompleteProps as any;\n    const [open, setOpen] = useState(false);\n    const [searchText, setSearchText] = useState(\"\");\n    const [debouncedSearchText] = useDebounce(searchText, debounceTime);\n    const [loading, setLoading] = useState(false);\n    const [options, setOptions] = useState([]);\n    const textFieldProps: TextFieldProps = {\n        margin: 'normal',\n        variant: 'outlined',\n        fullWidth: true,\n        InputLabelProps: {shrink: true},\n        ...(props.TextFieldProps && {...props.TextFieldProps})\n    }\n\n    const autocompleteProps: AutocompleteProps<any, boolean, boolean, boolean> = {\n        open,\n        loading: loading,\n        loadingText: \"Carregando...\",\n        noOptionsText: \"Nenhum item encontrado\",\n        ...(AutocompleteProps && {...AutocompleteProps}),\n        onOpen(){\n            setOpen(true);\n            onOpen && onOpen();\n        },\n        onClose(){\n            setOpen(false);\n            onClose && onClose();\n        },\n        onInputChange(event, value){\n            setSearchText(value);\n            onInputChange && onInputChange();\n        },\n        options:options,\n        getOptionLabel:(option) => option.name,\n        renderInput: (params:any) => (\n            <TextField \n                {...params}\n                {...textFieldProps}\n                InputProps={{\n                    ...params.InputProps,\n                    endAdornment: (\n                        <>\n                            {loading && <CircularProgress color={\"inherit\"} size={20} />}\n                            {params.InputProps.endAdornment}\n                        </>\n                    )\n                }}\n            />    \n        )\n    };\n\n    useEffect(()=> {\n        if(!open && !freeSolo) {\n            setOptions([]);\n        }\n    }, [freeSolo, open])\n\n    useEffect(() => {\n        if(!open || (debouncedSearchText === \"\" && freeSolo)){\n            return;\n        }\n\n        let isSubscribed = true;\n        (async () => {\n            setLoading(true);\n            try {\n                const data = await fetchOptions(debouncedSearchText);\n                if(isSubscribed) {\n                    setOptions(data);\n                }\n            } finally {\n                setLoading(false);\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        };\n    }, [freeSolo, debouncedSearchText, open, fetchOptions]);\n\n    useImperativeHandle(ref, () => ({\n        clear: () => {\n            setSearchText(\"\");\n            setOptions([]);\n        }\n    }));\n\n    return (\n        <Autocomplete {...autocompleteProps}/>\n    );\n});\n\nexport default AsyncAutocomplete;\n\n\n","import { createStyles, Grid, makeStyles, Theme } from '@material-ui/core'\nimport { GridProps } from '@material-ui/core/Grid'\nimport * as React from 'react'\n\nconst useStyles = makeStyles( (theme: Theme) => \n    createStyles( {\n        root: {\n            backgroundColor: '#f1f1f1',\n            borderRadius: '4px',\n            padding: theme.spacing(1, 1),\n            color: theme.palette.secondary.main\n        }\n    })\n);\n\ninterface GridSelectedProps extends GridProps {\n    \n}\n\nexport const  GridSelected: React.FC<GridSelectedProps> = (props) => {\n    const classes = useStyles();\n    return <Grid container wrap={\"wrap\"} className={classes.root} {...props}>\n        {props.children}      \n    </Grid>\n};\n\nexport default GridSelected;\n","import { Grid, IconButton } from '@material-ui/core';\nimport { GridProps } from '@material-ui/core/Grid'\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport * as React from 'react';\n\ninterface GridSelectedItemProps extends GridProps {\n    onDelete: () => void\n}\n\nexport const  GridSelectedItem: React.FC<GridSelectedItemProps> = (props) =>  {\n    const {onDelete, children, ...other} = props;\n    return (\n        <Grid item {...other}>\n            <Grid container alignItems={\"center\"} spacing={3}>\n                <Grid item xs={1}>\n                    <IconButton size={\"small\"} color={\"inherit\"} onClick={onDelete}>\n                        <DeleteIcon />\n                    </IconButton>\n                </Grid>\n                <Grid item xs={10} md={11}>\n                    {children}\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n};\n\n\nexport default GridSelectedItem;","import { useSnackbar } from \"notistack\";\n\nconst useCollectionManager = (collection: any[], setCollection: (item: any) => void) => {\n    const snackbar = useSnackbar();\n    return {\n        addItem(item: any) {\n            if(!item || item === \"\") {\n                return;\n            }\n            const exists = collection.find(i => i.id === item.id);\n            if(exists) {\n                snackbar.enqueueSnackbar(\n                    'Item ja adicionado', {variant: 'info'}\n                )\n            }\n            else {\n                collection.unshift(item);\n                setCollection(collection);\n                //setValue([...collection, item]);\n            }\n        },\n        removeItem(item: any) {\n            const index = collection.findIndex(i => i.id === item.id);\n            if(index === -1){\n                return;\n            }\n            collection.splice(index, 1);\n            setCollection(collection);\n        }\n    }\n};\n\nexport default useCollectionManager","import { useSnackbar } from \"notistack\";\nimport { useCallback } from 'react'\nimport axios from 'axios';\n\nconst useHttpHandle = () => {\n    const {enqueueSnackbar} = useSnackbar();\n    return useCallback(async (request: Promise<any>) => {\n        try {\n            const {data} = await request;\n            return data;\n        } catch(e) {\n            console.log(e);\n            if(!axios.isCancel(e)) {\n                enqueueSnackbar(\n                    'Nao foi possível carregar as infirmações',\n                    { variant: 'error'}\n                );\n            }\n            throw e;\n        }\n\n    }, [enqueueSnackbar]);\n};\n\nexport default useHttpHandle;","import { Category, Genre } from \"./models\";\n\nexport function getGenresFromCategory(genres: Genre[], category: Category) {\n    return genres.filter(\n        genre => genre.categories.filter(cat => cat.id === category.id).length !== 0\n    );\n}","import { FormControl, FormControlProps, FormHelperText, Typography, useTheme } from '@material-ui/core';\nimport React, {MutableRefObject, RefAttributes, useImperativeHandle, useRef, useCallback } from 'react'\nimport AsyncAutocomplete, {AsyncAutocompleteComponent} from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport GridSelectedItem from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandle from '../../../hooks/useHttpHandle';\nimport genreHttp from '../../../util/http/genre-http';\nimport { getGenresFromCategory } from '../../../util/model-filters';\nimport { Category, Genre, ListResponse } from '../../../util/models';\n\ninterface GenreFieldProps extends RefAttributes<GenreFieldComponent>{\n    genres: Genre[],\n    setGenres: (genres:Genre[]) => void,\n    categories: Category[],\n    setCategories: (categories:Category[]) => void,\n    error: any,\n    disabled?: boolean;\n    FormControlProps?: FormControlProps;\n}\n\nexport interface GenreFieldComponent {\n    clear: () => void\n}\n\nconst GenreField = React.forwardRef<GenreFieldComponent, GenreFieldProps>((props, ref) => {\n    const {\n        genres, \n        setGenres, \n        categories, \n        setCategories,\n        error, \n        disabled\n    } = props;\n    const autoCompleteHttp = useHttpHandle();\n    const {addItem, removeItem} = useCollectionManager(genres, setGenres);\n    const {removeItem: removeCategory} = useCollectionManager(categories, setCategories);\n    const autoCompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n    const theme = useTheme();\n\n    const fetchOptions = useCallback((searchText: string) => {\n        return autoCompleteHttp(\n            genreHttp.list<ListResponse<Genre>>({\n                queryParams: {\n                    search: searchText, \n                    all: \"\"\n                }\n            })\n        ).then( data => data.data).catch(error => console.log(error));\n    }, [autoCompleteHttp]);\n    \n    useImperativeHandle(ref, () => ({\n        clear: () => autoCompleteRef.current.clear()        \n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete \n                ref={autoCompleteRef}\n                fetchOptions={fetchOptions}\n                AutocompleteProps={{\n                    //autoSelect: true,\n                    clearOnEscape: true,\n                    freeSolo: true,\n                    getOptionLabel: option => option.name,\n                    getOptionSelected: (option, value) => option.id === value.id,\n                    onChange: (event, value) => addItem(value),\n                    disabled\n                }}\n                TextFieldProps={{\n                    label: \"Gêneros\",\n                    error: error !== undefined\n                }}\n            />\n            <FormHelperText style={{height: theme.spacing(3)}}>\n                Escolha pelo os gêneros do video\n            </FormHelperText>\n            <FormControl \n                margin={\"normal\"}\n                fullWidth\n                disabled={disabled === true}\n                error={error !== undefined}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {genres.map((genre, key) => \n                        <GridSelectedItem \n                            key={key} \n                            xs={12}\n                            onDelete={() => {\n                                const categoriesWithOneGenre = categories\n                                    .filter(category => {\n                                        const genresFromCategory = getGenresFromCategory(genres, category);\n                                        return genresFromCategory.length === 1 && genres[0].id === genre.id;\n                                    });\n                                categoriesWithOneGenre.forEach(cat => removeCategory(cat));\n                                removeItem(genre);\n                            }}\n                        >\n                            <Typography noWrap={true}>{genre.name}</Typography>\n                        </GridSelectedItem>\n                    )}\n                </GridSelected>\n                {   \n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }         \n            </FormControl>\n        </>\n    )   \n});\n\nexport default GenreField\n","import { FormControl, FormControlProps, FormHelperText, makeStyles, Theme, Typography, useTheme } from '@material-ui/core';\nimport React, {MutableRefObject, RefAttributes, useImperativeHandle, useRef, useCallback} from 'react'\nimport AsyncAutocomplete, {AsyncAutocompleteComponent} from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport GridSelectedItem from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandle from '../../../hooks/useHttpHandle';\nimport categoryHttp from '../../../util/http/category-http';\nimport { Category, Genre, ListResponse } from '../../../util/models';\nimport { getGenresFromCategory } from '../../../util/model-filters';\nimport { grey } from '@material-ui/core/colors';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    genresSubtitle:{\n        color: grey[\"800\"],\n        fontSize: '0.8rem'\n    }\n}));\n\ninterface CategoryFieldProps extends RefAttributes<CategoryFieldComponent> {\n    categories: Category[],\n    setCategories: (categories:Category[]) => void,\n    genres: Genre[],\n    error: any,\n    disabled?: boolean;\n    FormControlProps?: FormControlProps;\n}\n\nexport interface CategoryFieldComponent {\n    clear: () => void\n}\n\nconst CategoryField = React.forwardRef<CategoryFieldComponent, CategoryFieldProps>((props, ref) => {\n\n    const {categories, setCategories, genres, error, disabled} = props;\n    const classes = useStyles();\n    const autoCompleteHttp = useHttpHandle();\n    const {addItem, removeItem} = useCollectionManager(categories, setCategories);\n    const autoCompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n    const theme = useTheme();\n\n    const fetchOptions = useCallback((searchText: string) => {\n        return autoCompleteHttp(\n            categoryHttp.list<ListResponse<Category>>({\n                queryParams: {\n                    genres: genres.map(genre => genre.id).join(','),\n                    all: \"\"\n                }\n            })\n        ).then( data => data.data).catch(error => console.log(error));\n    }, [genres, autoCompleteHttp]);\n\n    useImperativeHandle(ref, () => ({\n        clear: () => autoCompleteRef.current.clear()        \n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete \n                ref={autoCompleteRef}\n                fetchOptions={fetchOptions}\n                AutocompleteProps={{\n                    //autoSelect: true,\n                    clearOnEscape: true,\n                    getOptionLabel: option => option.name,\n                    onChange: (event, value) => addItem(value),\n                    getOptionSelected: (option, value) => option.id === value.id,\n                    disabled: disabled === true || !genres.length\n                }}\n                TextFieldProps={{\n                    label: \"Categorias\",\n                    error: error !== undefined\n                }}\n            />\n            <FormHelperText style={{height: theme.spacing(3)}}>\n                Escolha pelo menos uma categoria de cada gênero\n            </FormHelperText>\n            <FormControl \n                margin={\"normal\"}\n                fullWidth\n                disabled={disabled === true}\n                error={error !== undefined}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {\n                        categories.map((category, key) => {\n                            const generesFromCategory = getGenresFromCategory(genres, category)\n                                .map(genre => genre.name)\n                                .join(',');\n                            return (\n                                <GridSelectedItem key={key} onDelete={()=> removeItem(category)} xs={12}>\n                                    <Typography noWrap={true}>{category.name}</Typography>\n                                    <Typography noWrap={true} className={classes.genresSubtitle}>Gêneros: {generesFromCategory}</Typography>\n                                </GridSelectedItem>\n                            );\n                        }\n                    )}\n                </GridSelected>\n                {\n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }         \n            </FormControl>\n        </>\n    )   \n});\n\nexport default CategoryField\n","import { FormControl, FormControlProps, FormHelperText, Typography } from '@material-ui/core';\nimport React, {MutableRefObject, RefAttributes, useImperativeHandle, useRef, useCallback} from 'react'\nimport AsyncAutocomplete, {AsyncAutocompleteComponent} from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport GridSelectedItem from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandle from '../../../hooks/useHttpHandle';\nimport castMemberHttp from '../../../util/http/castmember-http';\nimport { CastMember, ListResponse } from '../../../util/models';\n\ninterface CastMemberFieldProps extends RefAttributes<CastMemberFieldComponent> {\n    cast_members: CastMember[],\n    setCastMembers: (cast_members:CastMember[]) => void,\n    error: any,\n    disabled?: boolean;\n    FormControlProps?: FormControlProps;\n}\n\nexport interface CastMemberFieldComponent {\n    clear: () => void\n}\n\nconst CastMemberField = React.forwardRef<CastMemberFieldComponent, CastMemberFieldProps>((props, ref) => {\n    const {\n        cast_members, \n        setCastMembers, \n        error, \n        disabled\n    } = props;\n    const autoCompleteHttp = useHttpHandle();\n    const {addItem, removeItem} = useCollectionManager(cast_members, setCastMembers);\n    const autoCompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n\n    const fetchOptions = useCallback((searchText: string) => {\n        return autoCompleteHttp(\n            castMemberHttp.list<ListResponse<CastMember>>({\n                queryParams: {\n                    search: searchText, \n                    all: \"\"\n                }\n            })\n        )\n        .then( data => data.data)\n        .catch(error => console.log(error));\n    }, [autoCompleteHttp]);\n    \n    useImperativeHandle(ref, () => ({\n        clear: () => autoCompleteRef.current.clear()        \n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete \n                ref={autoCompleteRef}\n                fetchOptions={fetchOptions}\n                AutocompleteProps={{\n                    //autoSelect: true,\n                    clearOnEscape: true,\n                    freeSolo: true,\n                    getOptionLabel: option => option.name,\n                    getOptionSelected: (option, value) => option.id === value.id,\n                    onChange: (event, value) => addItem(value),\n                    disabled\n                }}\n                TextFieldProps={{\n                    label: \"Membro do Elenco\",\n                    error: error !== undefined\n                }}\n            />\n            <FormControl \n                margin={\"normal\"}\n                fullWidth\n                disabled={disabled === true}\n                error={error !== undefined}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {cast_members.map((cast_member, key) => \n                        <GridSelectedItem \n                            key={key} \n                            xs={6}\n                            onDelete={() => {\n                                removeItem(cast_member);\n                            }}\n                        >\n                            <Typography noWrap={true}>{cast_member.name}</Typography>\n                        </GridSelectedItem>\n                    )}\n                </GridSelected>\n                {   \n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }         \n            </FormControl>\n        </>\n    )   \n});\n\nexport default CastMemberField;\n","import { useSnackbar } from \"notistack\";\nimport { useEffect } from \"react\";\n\nconst useSnackbarFormError = (submitCount: number, errors:any) => {\n    const {enqueueSnackbar} = useSnackbar();\n    useEffect(() => {\n        const hasError = Object.keys(errors).length !== 0;\n        if(submitCount> 0 && hasError) {\n            enqueueSnackbar(\n                'Formulario invalido. Reveja os campos marcados de vermelhos.',\n                {variant: 'error'}\n            );\n        }\n    }, [submitCount, errors, enqueueSnackbar]);\n}\n\n\nexport default useSnackbarFormError;","import {Upload, FileUpload} from './types'\n\nexport function countInProgress(uploads: Upload[]) : number {\n    return uploads.filter(upload => !isFinished(upload)).length;\n}\n\nexport function isFinished(obj: Upload | FileUpload): boolean {\n    return obj.progress === 1 || hasError(obj);\n}\n\nexport function hasError(obj: Upload | FileUpload): boolean {\n    if(isUploadType(obj)) {\n        const upload = obj as Upload;\n        return upload.files.some(file => file.error);\n    }\n    else {\n        const file = obj as FileUpload;\n        return file.error !== undefined;\n    }\n}\n\nexport function isUploadType(obj: Upload | FileUpload): boolean {\n    return 'video' in obj;\n}","import { CircularProgress, Fade, makeStyles, Theme } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\nimport React from 'react'\nimport {Upload, FileUpload} from '../store/upload/types';\nimport {hasError} from '../store/upload/getters'\n\nconst useStyles = makeStyles( (theme: Theme) => ({\n    progressContainer: {\n        position: 'relative',\n    },\n    progress: {\n        position: 'absolute',\n        left: 0\n    },\n    progressBackground: {\n        color: grey[\"300\"]\n    },\n}));\n\ninterface UploadProgressProps {\n    size: number;\n    uploadOrFile: Upload | FileUpload;\n}\n\nconst UploadProgress: React.FC<UploadProgressProps> = (props) => {\n    const {uploadOrFile, size} = props;\n    const classes = useStyles();\n    const error = hasError(uploadOrFile);\n    return (\n        <Fade in={uploadOrFile.progress < 1} timeout={{enter: 100, exit: 2000}}>\n            <div className={classes.progressContainer}>\n                <CircularProgress\n                    variant=\"static\"\n                    value={100}\n                    className={classes.progressBackground}\n                    size={size}\n                />\n                <CircularProgress\n                    variant=\"static\"\n                    value={error ? 0 : uploadOrFile.progress * 100}\n                    className={classes.progress}\n                    size={size}\n                />\n            </div>\n        </Fade>\n    )\n}\n\nexport default UploadProgress;\n","import * as Typings from \"./types\";\nimport update from 'immutability-helper';\nimport { createActions, createReducer } from 'reduxsauce';\n\nexport const { Types, Creators } = createActions<{\n    ADD_UPLOAD: string,\n    REMOVE_UPLOAD: string,\n    UPDATE_PROGRESS: string,\n    SET_UPLOAD_ERROR: string;\n}, {\n    addUpload(payload: Typings.AddUploadAction['payload']): Typings.AddUploadAction,\n    removeUpload(payload: Typings.RemoveUploadAction['payload']): Typings.RemoveUploadAction,\n    updateProgress(payload: Typings.UpdateProgressAction['payload']): Typings.UpdateProgressAction,\n    setUploadError(payload: Typings.SetUploadErrorAction['payload']): Typings.SetUploadErrorAction\n}>\n( {\n    addUpload: ['payload'],\n    removeUpload: ['payload'],\n    updateProgress: ['payload'],\n    setUploadError: ['setUploadError']\n});\n\nexport const INITIAL_STATE: Typings.UploadState = { \n    uploads: []\n};\n\nconst reducer = createReducer<Typings.UploadState, Typings.Actions>(INITIAL_STATE, {\n    [Types.ADD_UPLOAD]: addUpload,\n    [Types.REMOVE_UPLOAD]: removeUpload,\n    [Types.UPDATE_PROGRESS]: updateProgress,\n    [Types.SET_UPLOAD_ERROR]: setUploadError\n});\n\nexport default reducer;\n\nfunction addUpload(state = INITIAL_STATE, action: Typings.AddUploadAction) : Typings.UploadState {\n    if(!action.payload.files.length) {\n        return state;\n    }\n    \n    const index = findIndexUpload(state, action.payload.video.id);\n    if(index !== -1 && state.uploads[index].progress < 1) {\n        return state;\n    }\n\n    const uploads = index === -1 \n        ? state.uploads\n        : update(state.uploads, {\n            $splice: [[index, 1]]\n        })\n\n    return {\n        uploads: [\n            ...uploads,\n            {\n                video: action.payload.video,\n                progress: 0,\n                files: action.payload.files.map(file => ({\n                    fileField: file.fileField,\n                    filename: file.file.name,\n                    progress: 0\n                }))                \n            }\n        ]\n    };\n}\n\nfunction removeUpload(state = INITIAL_STATE, action: Typings.RemoveUploadAction) : Typings.UploadState {\n    const uploads = state.uploads.filter(upload => upload.video.id !== action.payload.id);\n    if(uploads.length === state.uploads.length) {\n        return state;\n    }\n    return { uploads };\n}\n\nfunction updateProgress(state = INITIAL_STATE, action: Typings.UpdateProgressAction) : Typings.UploadState {\n    const videoId = action.payload.video.id;\n    const fileField = action.payload.fileField;\n    const {indexUpload, indexFile} = findIndexUploadAndFile(state, videoId, fileField);\n    if(typeof indexUpload === \"undefined\" || typeof indexFile === \"undefined\") {\n        return state;\n    }\n    const upload = state.uploads[indexUpload];\n    const file = upload.files[indexFile];\n\n    if(file.progress === action.payload.progress) {\n        return state;\n    }\n\n    const uploads  = update(state.uploads, {\n        [indexUpload]: {\n            $apply(upload) {\n                const files = update(upload.files, {\n                    [indexFile]: {\n                        $set: {...file, progress: action.payload.progress}\n                    }\n                });\n                const progress = calculateGlobalProgress(files);\n                return {...upload, progress, files};\n            }\n        }\n    });\n\n    return {uploads}\n}\n\nfunction setUploadError(state = INITIAL_STATE, action: Typings.SetUploadErrorAction) : Typings.UploadState {\n    const videoId = action.payload.video.id;\n    const fileField = action.payload.fileField;\n    const {indexUpload, indexFile} = findIndexUploadAndFile(state, videoId, fileField);\n    if(typeof indexUpload === \"undefined\" || typeof indexFile === \"undefined\") {\n        return state;\n    }\n    const upload = state.uploads[indexUpload];\n    const file = upload.files[indexFile];\n\n    const uploads  = update(state.uploads, {\n        [indexUpload]: {\n            files: {\n                [indexFile]: {\n                    $set: {...file, error: action.payload.error, progress: 1}\n                }\n            }\n        }\n    });\n\n    return {uploads}\n}\n\nfunction findIndexUploadAndFile(state: Typings.UploadState, videoId: string, fileField: string): {indexUpload?: number, indexFile?: number} {\n    const indexUpload = findIndexUpload(state, videoId);\n    if(indexUpload === -1) {\n        return {};\n    }\n    const upload = state.uploads[indexUpload];\n    const indexFile = findIndexFile(upload.files, fileField);\n    return indexFile === -1 ? {} : {indexUpload, indexFile};\n}\n\nfunction calculateGlobalProgress(files: Array<{progress: number}>) {\n    const countFiles = files.length;\n    if(!countFiles) {\n        return 0;\n    }\n\n    const sumProgress = files.reduce((sum, file) => sum + file.progress, 0);\n\n    return sumProgress / countFiles; \n}\n\nfunction findIndexUpload(state: Typings.UploadState, id: string) {\n    return state.uploads.findIndex((upload) => upload.video.id === id);\n}\n\nfunction findIndexFile(files: Array<{fileField: string}>, fileField: string) {\n    return files.findIndex((file) => file.fileField === fileField);\n}","import { Fade, IconButton, ListItemSecondaryAction, makeStyles, Theme } from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport React, {useEffect, useState} from 'react';\nimport {Upload} from '../../store/upload/types';\nimport {hasError, isFinished} from '../../store/upload/getters';\nimport {useDispatch} from \"react-redux\";\nimport {Creators}  from '../../store/upload';\nimport {useDebounce} from \"use-debounce\";\n\nconst useStyles = makeStyles( (theme: Theme) => ({\n    successIcon: {\n        color: theme.palette.success.main\n    },\n    errorIcon: {\n        color: theme.palette.error.main\n    },\n}));\n\ninterface UploadActionProps {\n    upload: Upload;\n    hover: boolean;\n}\n\nconst UploadAction: React.FC<UploadActionProps> = (props) => {\n    const {upload, hover} = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [show, setShow] = useState(false);\n    const [debouncedShow] = useDebounce(show, 2500);\n    const error = hasError(upload);\n\n    useEffect( () => {\n        setShow(isFinished(upload))\n    }, [upload])\n\n    return (\n        debouncedShow \n            ? (<Fade in={true} timeout={{enter:1000}}>\n                <ListItemSecondaryAction>\n                    <span hidden={hover}>\n                        {\n                            upload.progress === 1 && !error && (\n                                <IconButton className={classes.successIcon} edge=\"end\">\n                                    <CheckCircleIcon />\n                                </IconButton>\n                            )\n                        }\n                        {   error && (\n                                <IconButton \n                                    className={classes.errorIcon} \n                                    edge=\"end\"\n                                >\n                                    <ErrorIcon />\n                                </IconButton>\n                            )\n                        }\n                    </span>\n                    <span hidden={!hover}>\n                        <IconButton\n                            color={'primary'}\n                            edge=\"end\"\n                            onClick={() => dispatch(Creators.removeUpload({id: upload.video.id}))}\n                        >\n                            <DeleteIcon />\n                        </IconButton>\n                    </span>\n                </ListItemSecondaryAction>\n            </Fade>)\n        : null\n    )\n}\n\nexport default UploadAction;\n","import { Divider, ListItem, ListItemIcon, ListItemText, makeStyles, Theme, Tooltip, Typography } from '@material-ui/core';\nimport MovieIcon from '@material-ui/icons/Movie';\nimport React, { useState} from 'react';\nimport UploadProgress from '../UploadProgress';\nimport UploadAction from './UploadAction';\nimport {Upload} from '../../store/upload/types';\nimport {hasError} from '../../store/upload/getters';\n\nconst useStyles = makeStyles( (theme: Theme) => ({\n    listItem: {\n        paddingTop: '7px',\n        paddingBottom: '7px',\n        height: '53px'\n    },\n    moveIcon: {\n        color: theme.palette.error.main,\n        minWidth: '40px'\n    },\n    listItemText: {\n        marginLeft: '6px',\n        marginRight: '24px',\n        color: theme.palette.text.secondary\n    },\n}));\n\ninterface UploadItemProps {\n    upload: Upload;\n}\n\nconst UploadItem: React.FC<UploadItemProps> = (props)  => {\n    const {upload} = props;\n    const classes = useStyles();\n    const error = hasError(upload);\n    const [itemHover, setItemHover] = useState(false);\n\n    return (\n        <>\n            <Tooltip\n                disableFocusListener\n                disableTouchListener\n                title={\n                    error ? 'Nao foi possivel fazer o upload, clique para mais detalhes' : ''\n                }\n                placement='left'\n            >\n                <ListItem\n                    className={classes.listItem}\n                    button\n                    onMouseOver={() => setItemHover(true)}\n                    onMouseLeave={() => setItemHover(false)}\n                >\n                    <ListItemIcon className={classes.moveIcon}>\n                        <MovieIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        className={classes.listItemText}\n                        primary={\n                            <Typography noWrap={true} variant={'subtitle2'} color={'inherit'}>\n                                {upload.video.title}\n                            </Typography>\n                        }\n                    />\n                    <UploadProgress size={30} uploadOrFile={upload}/>  \n                    <UploadAction upload={upload} hover={itemHover}/>\n                </ListItem>\n            </Tooltip>\n            <Divider component='li'/>\n        </>\n    )\n}\n\nexport default UploadItem;\n","import { Card, CardActions, Collapse, IconButton, List, Theme, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useSnackbar } from 'notistack';\nimport React, {useState} from 'react';\nimport classnames from 'classnames';\nimport UploadItem from './UploadItem';\nimport {useSelector} from 'react-redux';\nimport {Upload, UploadModule} from '../../store/upload/types';\nimport {countInProgress} from '../../store/upload/getters';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    card: {\n        width: 450,\n    },\n    cardActionRoot: {\n        padding: '8px 8px 8px 16px',\n        backgroundColor: theme.palette.primary.main,\n    },\n    title: {\n        fontWeight: 'bold',\n        color: theme.palette.primary.contrastText,\n    },\n    icons: {\n        marginLeft: 'auto !important',\n        color: theme.palette.primary.contrastText,\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest\n        })\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest\n        })\n    },\n    list: {\n        paddingTop: 0,\n        paddingBottom: 0,\n\n    }\n}));\n\ntype SnackbarUploadProps = {\n    id: string | number;\n};\n\nconst SnackbarUpload = React.forwardRef<any, SnackbarUploadProps>( (props, ref)=> {\n    const {id} = props;\n    const classes = useStyles();\n    const {closeSnackbar} = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const uploads = useSelector<UploadModule, Upload[]>((state) => state.upload.uploads);\n\n    const totalInProgress = countInProgress(uploads);\n\n    return (\n        <Card ref={ref} className={classes.card}\n            onClick={() => console.log('card')}\n        >\n            <CardActions classes={{root: classes.cardActionRoot}}>\n                <Typography variant=\"subtitle2\" className={classes.title}>\n                    Fazendo upload de {totalInProgress} video(s)\n                </Typography>\n                <div className={classes.icons}>\n                    <IconButton\n                        color={\"inherit\"}\n                        onClick={ () => setExpanded(!expanded)}\n                        className={classnames(classes.expand, {[classes.expandOpen]: !expanded})}\n                    >\n                        <ExpandMoreIcon />    \n                    </IconButton>\n                    <IconButton\n                        color={\"inherit\"}\n                        onClick={() => closeSnackbar(id)}\n                    >\n                        <CloseIcon/>\n                    </IconButton>\n                </div>\n            </CardActions>\n            <Collapse in={expanded}>\n                <List className={classes.list}>\n                    {uploads.map((upload, key) => (\n                       <UploadItem key={key} upload={upload}/> \n                    ))}\n                </List>\n            </Collapse>\n        </Card>\n    );\n});\n\nexport default SnackbarUpload;","import { Card, CardContent, Checkbox, FormControlLabel, Grid, makeStyles, \n    TextField, Theme, Typography, \n    useMediaQuery, useTheme } from '@material-ui/core'\nimport { zipObject } from 'lodash';    \nimport { useSnackbar } from 'notistack';    \nimport { useCallback, useContext, useState, useEffect, MutableRefObject, useRef, createRef } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useParams, useHistory } from 'react-router';\n\nimport RatingField from './RatingField';\nimport UploadField from './UploadField';\nimport { InputFileComponent } from '../../../components/InputFile';\nimport videoHttp from '../../../util/http/video-http';\nimport * as yup from \"../../../util/vendor/yup/yup\";\nimport { useYupValidationResolver } from '../../../util/yup';\nimport { CastMember, Category, Genre, Video, VideoFileFieldsMap } from '../../../util/models';\nimport SubmitActions from '../../../components/SubmitActions';\nimport { DefaultForm } from '../../../components/DefaultForm';\nimport GenreField, {GenreFieldComponent} from './GenreField';\nimport CategoryField, {CategoryFieldComponent} from './CategoryField';\nimport CastMemberField, {CastMemberFieldComponent} from './CastMemberField';\nimport useSnackbarFormError from '../../../hooks/useSnackbarFormError';\nimport LoadingContext from '../../../components/loading/LoadingContext';\nimport SnackbarUpload from '../../../components/SnackbarUpload';\nimport { FileInfo} from '../../../store/upload/types';\nimport { Creators } from '../../../store/upload';\nimport {useDispatch} from \"react-redux\";\nimport {omit} from 'lodash';\n\nconst useStyles = makeStyles( (theme: Theme) => ({\n    cardUpload: {\n        boardRadius: \"4px\",\n        backgroundColor:\"#f5f5f5\",\n        margin: theme.spacing(2, 0)\n    },\n    cardOpened: {\n        boardRadius: \"4px\",\n        backgroundColor:\"#f5f5f5\",\n    },\n    cardContentOpened: {\n        paddingBottom: theme.spacing(2) + 'px !important'\n    }\n}));\n\nconst validationSchema = yup.object().shape({\n    title: yup.string()\n        .label('Titulo')\n        .required()\n        .max(255),\n    description: yup.string()\n        .label('Sinopse')\n        .required(),\n    year_launched: yup.number()\n        .label('Ano de lançamento')\n        .required()\n        .min(1),\n    duration: yup.number()\n        .label('Duração')\n        .required()\n        .min(1),\n    cast_members: yup.array()\n        .label('Membro do elenco')\n        .required()\n        .min(1),\n    genres: yup.array()\n        .label('Gêneros')\n        .required()\n        .min(1)\n        .test({\n            message: 'Cada gênero escolhido precisa ter pelo menos uma categoria selecionada',\n            test(value) {\n                var genres = value as Genre[];\n                return genres.every(\n                    g => g.categories.filter(\n                        cat => this.parent.categories.map((c: Category) => c.id).includes(cat.id)\n                    ).length !== 0\n                );\n            }\n        }),\n    categories: yup.array()\n        .label('Categorias')\n        .required()\n        .min(1),\n    rating: yup.string()\n        .label('Classificação')\n        .required()\n});\n\nconst fileFields = Object.keys(VideoFileFieldsMap);\n\nexport default function Form() {\n    const classes = useStyles();\n    const resolver = useYupValidationResolver(validationSchema);\n\n    const { register, handleSubmit, getValues, setValue, errors, reset, watch, trigger, formState } = \n        useForm<{\n            title: string, \n            description: string, \n            year_launched:number, \n            duration: number,\n            opened: boolean,\n            rating: any,\n            thumb_file: string,\n            banner_file: string,\n            trailer_file: string,            \n            video_file: string,            \n            cast_members: CastMember[],\n            genres: Genre[],\n            categories: Category[]\n        }>({\n            resolver,\n            defaultValues: {\n                rating: null,\n                opened: false,\n                cast_members: [],\n                genres: [],\n                categories: []\n        }\n    });\n    const {enqueueSnackbar} = useSnackbar()\n    const history = useHistory();\n    const {id} = useParams<any>();\n    const [video, setVideo] = useState<Video | null>(null);\n    const loading = useContext(LoadingContext);\n    const theme = useTheme();\n    const isGreaterMd = useMediaQuery(theme.breakpoints.up('md'));\n    const castMemberRef = useRef() as MutableRefObject<CastMemberFieldComponent>;\n    const genreRef = useRef() as MutableRefObject<GenreFieldComponent>;\n    const categoryRef = useRef() as MutableRefObject<CategoryFieldComponent>;\n    const uploadsRef = useRef(\n        zipObject(fileFields, fileFields.map(()=> createRef()))\n    ) as MutableRefObject<{[key:string]: MutableRefObject<InputFileComponent>}>;\n\n    useSnackbarFormError(formState.submitCount, errors);\n    \n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        ['rating', 'opened', 'genres', 'categories', 'cast_members', ...fileFields].forEach(field => register({name: field as never}));\n    }, [register]);\n\n    const resetForm = useCallback((data: any) => {\n        Object.keys(uploadsRef.current).forEach(\n            field => uploadsRef.current[field].current.clear()\n        );\n        castMemberRef.current.clear();\n        genreRef.current.clear();\n        categoryRef.current.clear();\n        reset(data);\n    }, [reset]);\n\n    useEffect(() => {\n        if(!id) {\n            return;\n        }\n        let isSubscribed = true;\n        (async () => {\n            try {\n                const {data} = await videoHttp.get(id);\n                if(isSubscribed) {\n                    setVideo(data.data);\n                    resetForm(data.data);\n                }\n            } catch (error) {\n                enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    {variant: 'error'}\n                );\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        };\n    }, [id, enqueueSnackbar, resetForm]);\n\n    async function onSubmit(formData: any, event: any) {\n        try {\n            const sendData = omit(\n                formData,\n                [...fileFields, 'cast_members' as never, 'genres' as never, 'categories' as never]\n            );\n            sendData['cast_members_id' as never] = formData['cast_members'].map((cast_member:any) => cast_member.id);\n            sendData['categories_id' as never] = formData['categories'].map((category:any) => category.id);\n            sendData['genres_id' as never] = formData['genres'].map((genre:any) => genre.id);            \n\n            const http = !video\n                ? videoHttp.create(sendData)\n                : videoHttp.update(video.id, sendData);\n            const {data} = await http;\n            enqueueSnackbar('Video salvo com sucesso', {\n                variant: 'success'\n            });\n            uploadFiles(data.data);\n            id && resetForm(video);\n            setTimeout( () => {\n                event \n                ? (\n                    id \n                        ? history.replace(`/videos/${data.data.id}/edit`)\n                        : history.push(`/videos/${data.data.id}/edit`)                        \n\n                )\n                : history.push('/videos');\n            })\n        } catch (error) {\n            console.error(error);\n            enqueueSnackbar('Nao foi possível salvar o video', {\n                variant: 'error'\n            });\n        }\n    }\n    \n    function uploadFiles(video: Video) {\n        const files: FileInfo[] = fileFields\n            .filter(fileField => getValues()[fileField as never])\n            .map(fileField => ({fileField, file: getValues()[fileField as never]}));\n        \n        if(files.length > 0) {\n            dispatch(Creators.addUpload({video, files}));\n\n            enqueueSnackbar('', {\n                key: 'snackbar-upload',\n                persist: true,\n                anchorOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'right'\n                },\n                content: (key, message) => (<SnackbarUpload id={key} />),\n            });\n        }\n    }\n\n    return (\n        <DefaultForm GridItemProps={{xs: 12}}  onSubmit={handleSubmit(onSubmit)}>\n            <Grid container spacing={5}>\n                <Grid item xs={12} md={6}>\n                    <TextField\n                        name=\"title\"\n                        label=\"Titulo\"\n                        fullWidth\n                        variant={\"outlined\"}\n                        inputRef={register}\n                        disabled={loading}\n                        InputLabelProps={{shrink:true}}\n                        error={errors.title !== undefined}\n                        helperText={errors.title && errors.title.message}\n                    />\n                    <TextField\n                        name=\"description\"\n                        label=\"Sinopse\"\n                        multiline\n                        rows=\"4\"\n                        margin=\"normal\"\n                        fullWidth\n                        variant={\"outlined\"}\n                        inputRef={register}\n                        disabled={loading}\n                        InputLabelProps={{shrink:true}}\n                        error={errors.description !== undefined}\n                        helperText={errors.description && errors.description.message}\n                    />\n                    <Grid container spacing={1}>\n                        <Grid item xs={6}>\n                            <TextField\n                                name=\"year_launched\"\n                                label=\"Ano de lançamento\"\n                                type=\"number\"\n                                margin=\"normal\"\n                                fullWidth\n                                variant={\"outlined\"}\n                                inputRef={register}\n                                disabled={loading}\n                                InputLabelProps={{shrink:true}}\n                                error={errors.year_launched !== undefined}\n                                helperText={errors.year_launched && errors.year_launched.message}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <TextField\n                                name=\"duration\"\n                                label=\"Duração\"\n                                type=\"number\"\n                                margin=\"normal\"\n                                fullWidth\n                                variant={\"outlined\"}\n                                inputRef={register}\n                                disabled={loading}\n                                InputLabelProps={{shrink:true}}\n                                error={errors.duration !== undefined}\n                                helperText={errors.duration && errors.duration.message}\n                            />\n                        </Grid>\n                    </Grid>\n                    <CastMemberField \n                        ref={castMemberRef}\n                        cast_members={watch('cast_members')} \n                        setCastMembers={(value) => setValue('cast_members', value, {shouldValidate: true})}\n                        error={errors.cast_members}\n                        disabled={loading}\n                    />\n                    <Grid container spacing={2}>\n                        <Grid item xs={12} md={6}>\n                            <GenreField \n                                ref={genreRef}\n                                genres={watch('genres')} \n                                setGenres={(value) => setValue('genres', value, {shouldValidate: true})}\n                                categories={watch('categories')} \n                                setCategories={(value) => setValue('categories', value, {shouldValidate: true})}\n                                error={errors.genres}\n                                disabled={loading}\n                            />\n                        </Grid>\n                        <Grid item xs={12} md={6}>\n                            <CategoryField \n                                ref={categoryRef}\n                                categories={watch('categories')} \n                                setCategories={(value) => setValue('categories', value, {shouldValidate: true})}\n                                genres={watch('genres')}\n                                error={errors.categories}\n                                disabled={loading}\n                            />\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <RatingField \n                        value={watch('rating')}\n                        setValue={(value: string) => setValue('rating', value, { shouldValidate: true})}\n                        error={errors.rating}\n                        disabled={loading}\n                        FormControlProps={{\n                            margin: isGreaterMd ? 'none' : 'normal'\n                        }}\n                    />\n                    <br/>\n                    <Card className={classes.cardUpload}>\n                        <CardContent>\n                            <Typography color=\"primary\" variant=\"h6\">\n                                Imagens\n                            </Typography>\n                            <UploadField \n                                ref={uploadsRef.current['thumb_file']}\n                                accept={'image/*'}\n                                label={'Thumb'}\n                                setValue={(value: string) => setValue('thumb_file', value)}\n                            />\n                            <UploadField \n                                ref={uploadsRef.current['banner_file']}\n                                accept={'image/*'}\n                                label={'Banner'}\n                                setValue={(value: string) => setValue('banner_file', value)}\n                            />\n                        </CardContent>\n                    </Card>\n                    <Card className={classes.cardUpload}>\n                        <CardContent>\n                            <Typography color=\"primary\" variant=\"h6\">\n                                Videos\n                            </Typography>\n                            <UploadField \n                                ref={uploadsRef.current['trailer_file']}\n                                accept={'video/mp4'}\n                                label={'Trailer'}\n                                setValue={(value: string) => setValue('trailer_file', value)}\n                            />\n                            <UploadField \n                                ref={uploadsRef.current['video_file']}\n                                accept={'video/mp4'}\n                                label={'Principal'}\n                                setValue={(value: string) => setValue('video_file', value)}\n                            />\n                        </CardContent>\n                    </Card>\n                    <Card className={classes.cardOpened}>\n                        <CardContent className={classes.cardContentOpened}>\n                            <FormControlLabel\n                            control = {\n                                <Checkbox\n                                    name='opened'\n                                    color={'primary'}\n                                    onChange={\n                                        () => setValue('opened', !getValues()['opened'])\n                                    }\n                                    checked={watch('opened')}\n                                    disabled={loading}\n                                />    \n                            }\n                            label = {\n                                <Typography color=\"primary\" variant={\"subtitle2\"}>\n                                    Quero que este conteúdo apareça na seção lançamentos\n                                </Typography>\n                            }\n                            labelPlacement=\"end\"\n                        />\n                        </CardContent>\n                    </Card>\n                </Grid>\n            </Grid>\n            <SubmitActions \n                disabledButtons={loading}\n                handleSave={() => trigger().then((isValid) => {isValid && onSubmit(getValues(), null)})} \n            />\n        </DefaultForm>\n    )\n}\n","import { Page } from '../../components/Page'\nimport {useParams} from 'react-router';\nimport Form from './Form'\n\nexport default function PageForm() {\n    const {id} = useParams<any>();\n    return (\n        <Page title = {!id ? 'Criar video' : 'Editar video'}>\n            <Form/>\n        </Page>\n    )\n}\n","import { \n    Divider,\n    Fade,\n    IconButton,\n    makeStyles,\n    Theme\n} from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {Link} from 'react-router-dom';\nimport React, {useState, useEffect} from 'react'\nimport {Upload, FileUpload}  from '../../store/upload/types';\nimport {hasError, isFinished, isUploadType}  from '../../store/upload/getters';\nimport {Creators} from '../../store/upload';\nimport {useDispatch} from \"react-redux\";\nimport {useDebounce} from \"use-debounce\";\n\nconst useStyles = makeStyles( (theme: Theme) => {\n    return ({\n        successIcon: {\n            color: theme.palette.success.main,\n            marginLeft: theme.spacing(1)\n        },\n        errorIcon: {\n            color: theme.palette.error.main,\n            marginLeft: theme.spacing(1)\n        },\n        divider: {\n            height: '20px',\n            marginLeft: theme.spacing(1),\n            marginRight: theme.spacing(1)\n        }\n    });\n});\n\ninterface UploadActionProps {\n    uploadOrFile: Upload | FileUpload\n}\n\nconst UploadAction: React.FC<UploadActionProps> = (props) => {\n    const {uploadOrFile} = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [show, setShow] = useState(false);\n    const [debouncedShow] = useDebounce(show, 2500);\n    const error = hasError(uploadOrFile);\n    const videoId = (uploadOrFile as any).video?.id;\n    const activeActions = isUploadType(uploadOrFile);\n\n    useEffect( () => {\n        setShow(isFinished(uploadOrFile))\n    }, [uploadOrFile])\n\n    return (\n        debouncedShow \n            ? (<Fade in={true} timeout={{enter:1000}}>\n                <>\n                    {   \n                        uploadOrFile.progress === 1 && \n                        !error &&\n                        <CheckCircleIcon className={classes.successIcon}/>\n                    }\n                    { error && <ErrorIcon className={classes.errorIcon}/> }\n                    {activeActions && (\n                        <>\n                            <Divider className={classes.divider} orientation={'vertical'}/>\n                            <IconButton\n                                onClick={() => dispatch(Creators.removeUpload({id: videoId}))}\n                            >\n                                <DeleteIcon color={'primary'} />\n                            </IconButton>\n                            <IconButton\n                                component={Link}\n                                to={`/videos/${videoId}/edit`}\n                            >\n                                <EditIcon color={'primary'} />\n                            </IconButton>\n                        </>\n                    )}\n                </>\n            </Fade>)\n        : null\n    )\n};\n\nexport default UploadAction;","import { \n    Grid,\n    ListItem,\n    makeStyles, \n    Theme,\n    Typography\n} from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport MovieIcon from '@material-ui/icons/Movie';\nimport React from 'react'\n\nimport UploadAction from './UploadAction';\nimport UploadProgress from '../../components/UploadProgress';\nimport {Upload, FileUpload}  from '../../store/upload/types';\n\nconst useStyles = makeStyles( (theme: Theme) => {\n    return ({\n        gridTitle: {\n            display: 'flex',\n            color: '#999999'\n        },\n        icon: {\n            color: theme.palette.error.main,\n            minWidth: '40px'\n        }\n    });\n});\n\ninterface UploadItemProps {\n    uploadOrFile:  Upload | FileUpload;\n}\n\nconst UploadItem: React.FC<UploadItemProps> = (props) => {\n    const { uploadOrFile } = props;\n    const classes = useStyles();\n\n    function makeIcon() {\n        if(true) {\n            return <MovieIcon className={classes.icon}/>\n        }\n        return <ImageIcon className={classes.icon}/>\n    }\n\n    return (\n        <ListItem>\n            <Grid container alignItems={'center'}>\n                <Grid\n                    className={classes.gridTitle}\n                    item\n                    xs={12}\n                    md={9}\n                >\n                    {makeIcon()}\n                    <Typography color={\"inherit\"}>\n                        {props.children}\n                    </Typography>\n                </Grid>\n                <Grid item xs={12} md={3}>\n                    <Grid\n                        container\n                        direction={'row'}\n                        alignItems={'center'}\n                        justify={'flex-end'}\n                    >\n                        <UploadProgress size={48} uploadOrFile={uploadOrFile}/>\n                        <UploadAction uploadOrFile={uploadOrFile}/>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </ListItem>\n    )\n};\n\nexport default UploadItem;\n","import { \n    Card, \n    CardContent, \n    Divider,\n    ExpansionPanel, \n    ExpansionPanelDetails, \n    ExpansionPanelSummary, \n    Grid, \n    List, \n    makeStyles, \n    Theme, \n    Typography \n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport React from 'react';\nimport { Page } from '../../components/Page';\nimport UploadItem from './UploadItem';\nimport {useSelector} from 'react-redux';\nimport {Upload, UploadModule} from '../../store/upload/types';\nimport {VideoFileFieldsMap} from '../../util/models';\n\n\nconst useStyles = makeStyles( (theme: Theme) => {\n    return ({\n        panelSummary: {\n            backgroundColor: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText\n        },\n        expandedIcon: {\n            color: theme.palette.primary.contrastText\n        }\n    });\n});\n\n\nconst Uploads = () => {\n    const classes = useStyles();\n\n    const uploads = useSelector<UploadModule, Upload[]>((state: UploadModule) => {\n        return state.upload.uploads\n    });\n\n    return (\n        <Page title={'Uploads'}>\n            { \n                uploads.map((upload, key) => (\n                    <Card elevation={5} key={key}>\n                        <CardContent>\n                            <UploadItem uploadOrFile={upload}>\n                                {upload.video.title}\n                            </UploadItem>\n                        </CardContent>\n                        <ExpansionPanel style={{margin:0}}>\n                            <ExpansionPanelSummary\n                                className={classes.panelSummary}\n                                expandIcon={<ExpandMoreIcon className={classes.expandedIcon} />}\n                            >\n                                <Typography>Ver detalhes</Typography>\n                            </ExpansionPanelSummary>\n                            <ExpansionPanelDetails style={{padding: '0px'}}>\n                                <Grid item xs={12}>\n                                    <List dense={true} style={{padding: 'opx'}}>\n                                        { \n                                            upload.files.map((file, key) =>(\n                                                <React.Fragment key={key}>\n                                                    <Divider />\n                                                    <UploadItem uploadOrFile={file}>\n                                                        {`${VideoFileFieldsMap[file.fileField as never]} - ${file.filename}`} \n                                                    </UploadItem>\n                                                </React.Fragment>\n                                            ))\n                                        }\n                                    </List>\n                                </Grid>\n                            </ExpansionPanelDetails>\n                        </ExpansionPanel>\n                    </Card>\n                ))\n            }   \n        </Page>\n    );\n}\n\nexport default Uploads;","import {RouteProps} from 'react-router-dom'\nimport Dashboard from '../pages/Dashboard';\nimport CategoryList from '../pages/category/PageList';\nimport PageFormCategory from '../pages/category/PageForm';\nimport GenreList from '../pages/genre/PageList';\nimport PageFormGenre from '../pages/genre/PageForm';\nimport CastMemberList from '../pages/cast-member/PageList';\nimport PageFormCastMember from '../pages/cast-member/PageForm';\nimport VideoList from '../pages/video/PageList';\nimport PageFormVideo from '../pages/video/PageForm';\nimport UploadPage from '../pages/uploads';\n\nexport interface MyRouteProps extends RouteProps {\n    name: string;\n    label : string;    \n}\n\nconst routes: MyRouteProps[] =  [\n    {\n        name: 'dashboard',\n        label: 'Dashboard',\n        path: '/',\n        component: Dashboard,\n        exact: true\n    },\n    {\n        name: 'categories.list',\n        label: 'Listar categorias',\n        path: '/categories',\n        component: CategoryList,\n        exact: true\n    },\n    {\n        name: 'categories.create',\n        label: 'Criar categoria',\n        path: '/categories/create',\n        component: PageFormCategory,\n        exact: true\n    },\n    {\n        name: 'categories.edit',\n        label: 'Editar categoria',\n        path: '/categories/:id/edit',\n        component: PageFormCategory,\n        exact: true\n    },\n    {\n        name: 'genres.list',\n        label: 'Listar gêneros',\n        path: '/genres',\n        component: GenreList,\n        exact: true\n    },\n    {\n        name: 'genres.create',\n        label: 'Criar gênero',\n        path: '/genres/create',\n        component: PageFormGenre,\n        exact: true\n    },\n    {\n        name: 'genres.edit',\n        label: 'Editar gênero',\n        path: '/genres/:id/edit',\n        component: PageFormGenre,\n        exact: true\n    },\n    {\n        name: 'cast_members.list',\n        label: 'Listar membros do elenco',\n        path: '/cast-members',\n        component: CastMemberList,\n        exact: true\n    },\n    {\n        name: 'cast_members.create',\n        label: 'Criar membro do elenco',\n        path: '/cast-members/create',\n        component: PageFormCastMember,\n        exact: true\n    },\n    {\n        name: 'cast_members.edit',\n        label: 'Editar membro do elenco',\n        path: '/cast-members/:id/edit',\n        component: PageFormCastMember,\n        exact: true\n    },\n    {\n        name: 'videos.list',\n        label: 'Listar videos',\n        path: '/videos',\n        component: VideoList,\n        exact: true\n    },\n    {\n        name: 'videos.create',\n        label: 'Criar video',\n        path: '/videos/create',\n        component: PageFormVideo,\n        exact: true\n    },\n    {\n        name: 'videos.edit',\n        label: 'Editar video',\n        path: '/videos/:id/edit',\n        component: PageFormVideo,\n        exact: true\n    },\n    {\n        name: 'uploads',\n        label: 'Upload',\n        path: '/uploads',\n        component: UploadPage,\n        exact: true\n    }\n];\n\nexport default routes;","import React from 'react';\nimport {Box, Container, Breadcrumbs as MuiBreadcrumbs, Typography} from '@material-ui/core';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Link, { LinkProps } from '@material-ui/core/Link';\nimport { Location } from 'history';\nimport { Route } from 'react-router';\nimport { Link as RouterLink } from 'react-router-dom';\n\nimport routes from '../routes';\nimport RouteParser from 'route-parser';\n\n\nconst breadcrumbNameMap: { [key: string]: string } = {};\nroutes.forEach(route => breadcrumbNameMap[route.path as string] = route.label);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    linkRouter: {\n      color: theme.palette.secondary.main,\n      \"&:focus, &:active\": {\n        color: theme.palette.secondary.main\n      },\n      \"&:hover\": {\n        color: theme.palette.secondary.dark\n      }\n    }\n  }),\n);\n\ninterface LinkRouterProps extends LinkProps {\n  to: string;\n  replace?: boolean;\n}\n\nconst LinkRouter = (props: LinkRouterProps) => <Link {...props} component={RouterLink as any} />;\n\nexport default function Breadcrumbs() {\n  const classes = useStyles();\n\n  function makeBreadcrumb(location: Location) {\n      const pathNames = location.pathname.split('/').filter((x) => x);\n      pathNames.unshift('/');\n      return (\n        <MuiBreadcrumbs aria-label=\"breadcrumb\">\n          {\n            pathNames.map((value, index) => {\n              const last = index === pathNames.length - 1;\n              const to = `${pathNames.slice(0, index + 1).join('/').replace('//','/')}`;\n              const route = Object.keys(breadcrumbNameMap).find(path => new RouteParser(path).match(to));\n              if(route === undefined) {\n                return false;\n              }\n              return last ? (\n                <Typography color=\"textPrimary\" key={to}>\n                  {breadcrumbNameMap[route]}\n                </Typography>\n              ) : (\n                <LinkRouter color=\"inherit\" to={to} key={to} className={classes.linkRouter}>\n                  {breadcrumbNameMap[route]}\n                </LinkRouter>\n              );\n            })\n          }\n        </MuiBreadcrumbs>\n      );\n  }\n\n  return (\n      <Container>\n        <Box paddingBottom={2}>\n          <Route>\n            { ({location}: {location: Location}) => makeBreadcrumb(location) }\n          </Route>\n        </Box>\n      </Container>\n  );\n}\n\n","import React from 'react'\nimport { IconButton, Menu as MuiMenu, MenuItem } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport routes, { MyRouteProps } from '../../routes';\nimport { Link } from 'react-router-dom';\n\nconst listRoutes : {[index:string]: any} = {\n    'dashboard': 'Dashboard',\n    'categories.list': 'Categorias',\n    'cast_members.list': 'Membros de elenco',\n    'genres.list': 'Gêneros',\n    'videos.list': 'Videos',\n    'uploads' : 'Uploads'\n};\n\nconst menuRoutes = routes.filter(route => Object.keys(listRoutes).includes(route.name));\n\nexport const Menu = ()  => {\n    const [ anchorEl, setAnchorEl ] = React.useState(null);\n    const open = Boolean(anchorEl);\n\n    const handleOpen = (event:any) => setAnchorEl(event.currentTarget);\n    const handleClose = () => setAnchorEl(null);\n\n    return (\n        <React.Fragment>\n            <IconButton\n                edge=\"start\"\n                color=\"inherit\"\n                arial-label=\"open drawer\"\n                arial-controls=\"menu-appbar\"\n                aria-haspopup=\"true\"\n                onClick={handleOpen}\n            >\n                <MenuIcon />\n            </IconButton>\n            <MuiMenu \n                id=\"menu-appbar\" \n                open={open}\n                anchorEl={anchorEl}\n                onClose={handleClose}\n                anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n                transformOrigin={{vertical: \"top\", horizontal: \"center\"}}\n                getContentAnchorEl={null}\n            >\n                {\n                    Object.keys(listRoutes).map(\n                        (routeName, key) => {\n                            const route = menuRoutes.find(route => route.name === routeName) as MyRouteProps;\n                            return (\n                                <MenuItem key={key} component={Link} to={route.path as string} onClick={handleClose}>\n                                    {listRoutes[routeName]}\n                                </MenuItem>\n                            )\n                        }\n                    )\n                }\n            </MuiMenu>\n        </React.Fragment>\n    )\n};\n","import { AppBar, Button, makeStyles, Theme, Toolbar, Typography } from '@material-ui/core';\nimport React from 'react';\nimport logo from '../../static/img/logo.png'\nimport { Menu } from './Menu';\n\nconst useStyles = makeStyles( (theme: Theme) => ({\n    toolbar : {\n        backgroundColor: '#000000'\n    },\n    title : {\n        flexGrow: 1,\n        textAlign: 'center'\n    },\n    logo : {\n        width: 100,\n        [theme.breakpoints.up('sm')] : {\n            width: 170\n        }\n    }\n}))\n\nconst Navbar: React.FC = () => {\n    const classes = useStyles();\n\n    return (\n        <AppBar>\n            <Toolbar className={classes.toolbar}>\n                <Menu/>\n                <Typography className={classes.title}>\n                    <img src={logo} alt=\"CodeFlix\" className={classes.logo}/>\n                </Typography>\n                <Button color=\"inherit\">Login</Button>\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nexport default Navbar;","export default \"data:image/png;base64,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\"","import { Route, Switch } from 'react-router-dom';\nimport routes from './index';\n\nconst AppRouter = () => {\n    return (\n        <Switch>\n            {\n                routes.map(\n                    (route, key) => (\n                        <Route \n                            key={key}\n                            path={route.path}\n                            component={route.component}\n                            exact={route.exact === true}\n                        />\n                    )\n                )\n            }\n        </Switch>\n    );\n};\n\nexport default AppRouter;","import * as React from 'react';\nimport {SnackbarProvider as NotisnackProvider, SnackbarProviderProps} from 'notistack';\nimport {IconButton, makeStyles, Theme} from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return {\n        root: {\n            pointerEvents: 'all', // this avoid the problem where the click does not reach the snackbar\n        },\n        variantSuccess: {\n            backgroundColor: theme.palette.success.main\n        },\n        variantError: {\n            backgroundColor: theme.palette.error.main\n        },\n        variantInfo: {\n            backgroundColor: theme.palette.primary.main\n        }\n    }\n});\n\nexport const  SnackbarProvider: React.FC<SnackbarProviderProps> = (props) => {\n    let snackbarProviderRef:any;\n    const classes = useStyles();\n    const defaultProps: SnackbarProviderProps = {\n        classes,\n        autoHideDuration: 3000,\n        maxSnack: 3,\n        anchorOrigin: {\n            horizontal: 'right',\n            vertical: 'top'\n        },\n        preventDuplicate: true,\n        ref: (el) => snackbarProviderRef = el,\n        action: (key) => (\n            <IconButton \n                color={\"inherit\"} \n                style={{fontSize:20}}\n                onClick={() => {snackbarProviderRef.closeSnackbar(key)}}\n            >\n                <CloseIcon />\n            </IconButton>\n        ),\n        children: props.children\n    }\n\n    const newProps = {...defaultProps, ...props};\n\n    return (\n        <NotisnackProvider className={classes.root} {...newProps}>\n            {props.children}\n        </NotisnackProvider>\n    );\n}\n","import { Fade, LinearProgress, MuiThemeProvider, Theme } from '@material-ui/core';\nimport { useContext } from 'react';\nimport LoadingContext from './loading/LoadingContext';\n\nfunction makeLocalTheme(theme: Theme): Theme {\n    return {\n        ...theme,\n        palette: {\n            ...theme.palette,\n            primary: theme.palette.error,\n            type: 'dark'\n        }\n    }\n}\n\nconst Spinner = () => {\n    const loading = useContext(LoadingContext);\n    return (\n        <MuiThemeProvider theme={makeLocalTheme}>\n            <Fade in={loading}>\n                <LinearProgress \n                    color={'primary'}\n                    style={{\n                        position: 'fixed',\n                        width: '100%',\n                        zIndex: 9999\n                    }}\n                />\n            </Fade>\n        </MuiThemeProvider>\n    )\n}\n\nexport default Spinner;","import { useEffect, useMemo, useState } from 'react';\nimport { addGlobalRequestInterceptor, addGlobalResponseInterceptor, removeGlobalRequestInterceptor, removeGlobalResponseInterceptor } from '../../util/http';\n\nimport LoadingContext from './LoadingContext';\n\nexport const LoadingProvider = (props:any) => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [countRequest, setCountRequest] = useState<number>(0);\n\n    useMemo(() => {\n        let isSubscribed = true;\n        //axios.interceptors.request.use();\n        const requestIds = addGlobalRequestInterceptor((config) => {\n            if(isSubscribed && (!config.headers || !config.headers.hasOwnProperty('x-ignore-loading'))) {\n                setLoading(true);\n                setCountRequest((prevCountRequest) => prevCountRequest + 1);\n            }\n            return config;\n        });\n        //axios.interceptors.response.use();\n        const responseIds = addGlobalResponseInterceptor(\n            (response) => {\n                if(isSubscribed && !response.config.headers.hasOwnProperty('x-ignore-loading')) {\n                    decrementCountRequest();\n                }\n                return response;\n            }, (error) => {\n                if(isSubscribed && !error.config.headers.hasOwnProperty('x-ignore-loading')) {\n                    decrementCountRequest();\n                }\n                return Promise.reject(error);\n            }\n        );\n        return () => {\n            isSubscribed = false;\n            removeGlobalRequestInterceptor(requestIds);\n            removeGlobalResponseInterceptor(responseIds);\n        }\n    }, [true]);\n\n    useEffect(() => {\n        if(!countRequest) {\n            setLoading(false);\n        }\n    }, [countRequest] );\n\n    function decrementCountRequest() {\n        setCountRequest((prevCountRequest) => prevCountRequest - 1);\n    }\n\n\n    return (\n        <LoadingContext.Provider value={loading}>\n            {props.children}\n        </LoadingContext.Provider>\n    );\n};","import { Box, CssBaseline, MuiThemeProvider } from '@material-ui/core';\nimport React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport Breadcrumbs from './components/Breadcrumbs';\nimport Navbar from './components/Navbar';\nimport AppRouter from './routes/AppRouter';\nimport theme from './theme';\nimport { SnackbarProvider } from './components/SnackbarProvider';\nimport Spinner from './components/Spinner';\nimport { LoadingProvider } from './components/loading/LoadingProvider';\n\nconst App: React.FC = () => {\n  return (\n    <React.Fragment>\n      <LoadingProvider>\n        <MuiThemeProvider theme={theme}>\n          <SnackbarProvider>\n            <CssBaseline/>\n            <BrowserRouter basename=\"/admin\">\n              <Spinner/>\n              <Navbar/>\n              <Box paddingTop={'70px'}>\n                <Breadcrumbs />\n                <AppRouter />\n              </Box>\n            </BrowserRouter>\n          </SnackbarProvider>\n        </MuiThemeProvider>\n      </LoadingProvider>\n    </React.Fragment>\n  );\n};\n\nexport default App;\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { AxiosError } from \"axios\";\nimport {Types, Creators} from './index';\nimport {EventChannel, eventChannel, END} from 'redux-saga';\nimport {actionChannel, ActionPattern, take, call, CallEffect, put} from 'redux-saga/effects';\nimport {AddUploadAction, FileInfo} from './types';\nimport {Video} from '../../util/models';\nimport videoHttp from '../../util/http/video-http';\n\nexport function* uploadWatcherSaga() {\n    const newFilesChannel : ActionPattern = yield actionChannel(Types.ADD_UPLOAD);\n    while (true) {\n        const {payload}: AddUploadAction = yield take(newFilesChannel);\n        for(const fileInfo of payload.files) {\n            try{\n                const response: CallEffect = yield call(uploadFile, {video: payload.video, fileInfo});\n                console.log(response);\n            }\n            catch(e) {\n                console.log(e);\n            }\n        }\n        console.log(payload);\n    }\n}\n\n//criando um novo video\n// 1 - POST e criar\n// 2 - PUT com upload\n\n//editar um novo video\n// 1 - PUT e dditar\n// 2 - PUT com upload\nfunction* uploadFile({video, fileInfo}: {video: Video, fileInfo: FileInfo}) {\n    // fazer upload\n    // capturar progresso\n    // atualizar progresso\n    // tratamento de erro\n    const channel:EventChannel<any> = yield call(sendUpload, {id: video.id, fileInfo});\n    while(true) {\n        try{\n            const {progress, response} = yield take(channel);\n            if(response) {\n                return response;\n            }\n            yield put(Creators.updateProgress({\n                video,\n                fileField: fileInfo.fileField,\n                progress\n            }));\n        }\n        catch(e) {\n            yield put(Creators.setUploadError({\n                video,\n                fileField: fileInfo.fileField,\n                error: e as AxiosError\n            }));\n            throw e;\n        }\n    }\n}\n\nfunction sendUpload({id, fileInfo}: {id: string, fileInfo: FileInfo}) {\n    // termino do upload\n    // erro do upload\n    // progress (multiplo)\n    return eventChannel(emitter => {\n        videoHttp.partialUpdate(id, {\n                _method: 'PATCH',\n                [fileInfo.fileField]: fileInfo.file\n            }, {\n                http: {\n                    usePost: true\n                },\n                config: {\n                    headers: {\n                        'x-ignore-loading': true\n                    },\n                    onUploadProgress(progressEvent: ProgressEvent) {\n                        if(progressEvent.lengthComputable) {\n                            const progress = progressEvent.loaded/ progressEvent.total;\n                            emitter({progress});\n                        }\n                        \n                    }\n                }\n            }\n        )\n        .then(response => emitter({response}))\n        .catch(error => emitter(error))\n        .finally(() => emitter(END));\n        \n        const unsubscribe = () => {};\n        return unsubscribe;\n    });\n}    ","import {all} from 'redux-saga/effects';\nimport {uploadWatcherSaga} from './upload/sagas';\n\n\nexport default function* rootSaga() {\n    yield all([\n        uploadWatcherSaga()\n    ]);\n}","import {createStore, applyMiddleware, combineReducers} from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport upload from \"./upload\";\nimport rootSaga from './root-saga';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = createStore(\n    combineReducers({\n        upload\n    }),\n    applyMiddleware(sagaMiddleware)\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux';\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}